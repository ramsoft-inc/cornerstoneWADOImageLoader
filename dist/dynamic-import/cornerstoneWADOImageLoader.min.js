!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cornerstoneWADOImageLoader",[],t):"object"==typeof exports?exports.cornerstoneWADOImageLoader=t():e.cornerstoneWADOImageLoader=t()}(this,(()=>(()=>{var e,t,r,n={6610:function(e,t){!function(r){if("object"==typeof t&&void 0!==e)e.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).jpeg=r()}}((function(){return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,(function(e){var r=t[a][1][e];return o(r||e)}),c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ComponentSpec=n.lossless.ComponentSpec||function(){this.hSamp=0,this.quantTableSel=0,this.vSamp=0},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.ComponentSpec)},{}],2:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||function(e,t,r){this.buffer=new Uint8Array(e,t,r),this.index=0},n.lossless.DataStream.prototype.get16=function(){var e=(this.buffer[this.index]<<8)+this.buffer[this.index+1];return this.index+=2,e},n.lossless.DataStream.prototype.get8=function(){var e=this.buffer[this.index];return this.index+=1,e},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.DataStream)},{}],3:[function(e,t,r){"use strict";var n,o=o||{};o.lossless=o.lossless||{},o.lossless.DataStream=o.lossless.DataStream||(void 0!==e?e("./data-stream.js"):null),o.lossless.HuffmanTable=o.lossless.HuffmanTable||(void 0!==e?e("./huffman-table.js"):null),o.lossless.QuantizationTable=o.lossless.QuantizationTable||(void 0!==e?e("./quantization-table.js"):null),o.lossless.ScanHeader=o.lossless.ScanHeader||(void 0!==e?e("./scan-header.js"):null),o.lossless.FrameHeader=o.lossless.FrameHeader||(void 0!==e?e("./frame-header.js"):null),o.lossless.Utils=o.lossless.Utils||(void 0!==e?e("./utils.js"):null),o.lossless.Decoder=o.lossless.Decoder||function(e,t){this.buffer=e,this.frame=new o.lossless.FrameHeader,this.huffTable=new o.lossless.HuffmanTable,this.quantTable=new o.lossless.QuantizationTable,this.scan=new o.lossless.ScanHeader,this.DU=o.lossless.Utils.createArray(10,4,64),this.HuffTab=o.lossless.Utils.createArray(4,2,12800),this.IDCT_Source=[],this.nBlock=[],this.acTab=o.lossless.Utils.createArray(10,1),this.dcTab=o.lossless.Utils.createArray(10,1),this.qTab=o.lossless.Utils.createArray(10,1),this.marker=0,this.markerIndex=0,this.numComp=0,this.restartInterval=0,this.selection=0,this.xDim=0,this.yDim=0,this.xLoc=0,this.yLoc=0,this.numBytes=0,this.outputData=null,this.restarting=!1,this.mask=0,void 0!==t&&(this.numBytes=t)},o.lossless.Decoder.IDCT_P=[0,5,40,16,45,2,7,42,21,56,8,61,18,47,1,4,41,23,58,13,32,24,37,10,63,17,44,3,6,43,20,57,15,34,29,48,53,26,39,9,60,19,46,22,59,12,33,31,50,55,25,36,11,62,14,35,28,49,52,27,38,30,51,54],o.lossless.Decoder.TABLE=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],o.lossless.Decoder.MAX_HUFFMAN_SUBTREE=50,o.lossless.Decoder.MSB=2147483648,o.lossless.Decoder.RESTART_MARKER_BEGIN=65488,o.lossless.Decoder.RESTART_MARKER_END=65495,o.lossless.Decoder.prototype.decompress=function(e,t,r){return this.decode(e,t,r).buffer},o.lossless.Decoder.prototype.decode=function(e,t,r,n){var i,a,s,u,l=0,c=[],f=[],p=[];if(void 0!==e&&(this.buffer=e),void 0!==n&&(this.numBytes=n),this.stream=new o.lossless.DataStream(this.buffer,t,r),this.buffer=null,this.xLoc=0,this.yLoc=0,65496!==(i=this.stream.get16()))throw new Error("Not a JPEG file");for(i=this.stream.get16();i>>4!=4092||65476===i;){switch(i){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,o.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(i>>8!=255)throw new Error("ERROR: format throw new IOException! (decode)")}i=this.stream.get16()}if(i<65472||i>65479)throw new Error("ERROR: could not handle arithmetic code!");this.frame.read(this.stream),i=this.stream.get16();do{for(;65498!==i;){switch(i){case 65476:this.huffTable.read(this.stream,this.HuffTab);break;case 65484:throw new Error("Program doesn't support arithmetic coding. (format throw new IOException)");case 65499:this.quantTable.read(this.stream,o.lossless.Decoder.TABLE);break;case 65501:this.restartInterval=this.readNumber();break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:this.readApp();break;case 65534:this.readComment();break;default:if(i>>8!=255)throw new Error("ERROR: format throw new IOException! (Parser.decode)")}i=this.stream.get16()}switch(this.precision=this.frame.precision,this.components=this.frame.components,this.numBytes||(this.numBytes=parseInt(Math.ceil(this.precision/8))),1==this.numBytes?this.mask=255:this.mask=65535,this.scan.read(this.stream),this.numComp=this.scan.numComp,this.selection=this.scan.selection,1===this.numBytes?3===this.numComp?(this.getter=this.getValueRGB,this.setter=this.setValueRGB,this.output=this.outputRGB):(this.getter=this.getValue8,this.setter=this.setValue8,this.output=this.outputSingle):(this.getter=this.getValue16,this.setter=this.setValue16,this.output=this.outputSingle),this.selection){case 2:this.selector=this.select2;break;case 3:this.selector=this.select3;break;case 4:this.selector=this.select4;break;case 5:this.selector=this.select5;break;case 6:this.selector=this.select6;break;case 7:this.selector=this.select7;break;default:this.selector=this.select1}for(this.scanComps=this.scan.components,this.quantTables=this.quantTable.quantTables,a=0;a<this.numComp;a+=1)s=this.scanComps[a].scanCompSel,this.qTab[a]=this.quantTables[this.components[s].quantTableSel],this.nBlock[a]=this.components[s].vSamp*this.components[s].hSamp,this.dcTab[a]=this.HuffTab[this.scanComps[a].dcTabSel][0],this.acTab[a]=this.HuffTab[this.scanComps[a].acTabSel][1];for(this.xDim=this.frame.dimX,this.yDim=this.frame.dimY,1==this.numBytes?this.outputData=new Uint8Array(new ArrayBuffer(this.xDim*this.yDim*this.numBytes*this.numComp)):this.outputData=new Uint16Array(new ArrayBuffer(this.xDim*this.yDim*this.numBytes*this.numComp)),l+=1;;){for(f[0]=0,p[0]=0,a=0;a<10;a+=1)c[a]=1<<this.precision-1;if(0===this.restartInterval){for(i=this.decodeUnit(c,f,p);0===i&&this.xLoc<this.xDim&&this.yLoc<this.yDim;)this.output(c),i=this.decodeUnit(c,f,p);break}for(u=0;u<this.restartInterval&&(this.restarting=0==u,i=this.decodeUnit(c,f,p),this.output(c),0===i);u+=1);if(0===i&&(0!==this.markerIndex?(i=65280|this.marker,this.markerIndex=0):i=this.stream.get16()),!(i>=o.lossless.Decoder.RESTART_MARKER_BEGIN&&i<=o.lossless.Decoder.RESTART_MARKER_END))break}65500===i&&1===l&&(this.readNumber(),i=this.stream.get16())}while(65497!==i&&this.xLoc<this.xDim&&this.yLoc<this.yDim&&0===l);return this.outputData},o.lossless.Decoder.prototype.decodeUnit=function(e,t,r){return 1==this.numComp?this.decodeSingle(e,t,r):3==this.numComp?this.decodeRGB(e,t,r):-1},o.lossless.Decoder.prototype.select1=function(e){return this.getPreviousX(e)},o.lossless.Decoder.prototype.select2=function(e){return this.getPreviousY(e)},o.lossless.Decoder.prototype.select3=function(e){return this.getPreviousXY(e)},o.lossless.Decoder.prototype.select4=function(e){return this.getPreviousX(e)+this.getPreviousY(e)-this.getPreviousXY(e)},o.lossless.Decoder.prototype.select5=function(e){return this.getPreviousX(e)+(this.getPreviousY(e)-this.getPreviousXY(e)>>1)},o.lossless.Decoder.prototype.select6=function(e){return this.getPreviousY(e)+(this.getPreviousX(e)-this.getPreviousXY(e)>>1)},o.lossless.Decoder.prototype.select7=function(e){return(this.getPreviousX(e)+this.getPreviousY(e))/2},o.lossless.Decoder.prototype.decodeRGB=function(e,t,r){var n,i,a,s,u,l,c,f;for(e[0]=this.selector(0),e[1]=this.selector(1),e[2]=this.selector(2),u=0;u<this.numComp;u+=1)for(s=this.qTab[u],i=this.acTab[u],a=this.dcTab[u],l=0;l<this.nBlock[u];l+=1){for(c=0;c<this.IDCT_Source.length;c+=1)this.IDCT_Source[c]=0;if((n=this.getHuffmanValue(a,t,r))>=65280)return n;for(e[u]=this.IDCT_Source[0]=e[u]+this.getn(r,n,t,r),this.IDCT_Source[0]*=s[0],f=1;f<64;f+=1){if((n=this.getHuffmanValue(i,t,r))>=65280)return n;if(f+=n>>4,0==(15&n)){if(n>>4==0)break}else this.IDCT_Source[o.lossless.Decoder.IDCT_P[f]]=this.getn(r,15&n,t,r)*s[f]}}return 0},o.lossless.Decoder.prototype.decodeSingle=function(e,t,r){var n,i,a,s;for(this.restarting?(this.restarting=!1,e[0]=1<<this.frame.precision-1):e[0]=this.selector(),i=0;i<this.nBlock[0];i+=1){if((n=this.getHuffmanValue(this.dcTab[0],t,r))>=65280)return n;if((s=(a=this.getn(e,n,t,r))>>8)>=o.lossless.Decoder.RESTART_MARKER_BEGIN&&s<=o.lossless.Decoder.RESTART_MARKER_END)return s;e[0]+=a}return 0},o.lossless.Decoder.prototype.getHuffmanValue=function(e,t,r){var n,i;if(65535,r[0]<8?(t[0]<<=8,255===(i=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),t[0]|=i):r[0]-=8,0!=((n=e[t[0]>>r[0]])&o.lossless.Decoder.MSB)){if(0!==this.markerIndex)return this.markerIndex=0,65280|this.marker;t[0]&=65535>>16-r[0],t[0]<<=8,255===(i=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),t[0]|=i,n=e[256*(255&n)+(t[0]>>r[0])],r[0]+=8}if(r[0]+=8-(n>>8),r[0]<0)throw new Error("index="+r[0]+" temp="+t[0]+" code="+n+" in HuffmanValue()");return r[0]<this.markerIndex?(this.markerIndex=0,65280|this.marker):(t[0]&=65535>>16-r[0],255&n)},o.lossless.Decoder.prototype.getn=function(e,t,r,n){var o,i;if(1,-1,65535,0===t)return 0;if(16===t)return e[0]>=0?-32768:32768;if(n[0]-=t,n[0]>=0){if(n[0]<this.markerIndex&&!this.isLastPixel())return this.markerIndex=0,(65280|this.marker)<<8;o=r[0]>>n[0],r[0]&=65535>>16-n[0]}else{if(r[0]<<=8,255===(i=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),r[0]|=i,n[0]+=8,n[0]<0){if(0!==this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;r[0]<<=8,255===(i=this.stream.get8())&&(this.marker=this.stream.get8(),0!==this.marker&&(this.markerIndex=9)),r[0]|=i,n[0]+=8}if(n[0]<0)throw new Error("index="+n[0]+" in getn()");if(n[0]<this.markerIndex)return this.markerIndex=0,(65280|this.marker)<<8;o=r[0]>>n[0],r[0]&=65535>>16-n[0]}return o<1<<t-1&&(o+=1+(-1<<t)),o},o.lossless.Decoder.prototype.getPreviousX=function(e){return this.xLoc>0?this.getter(this.yLoc*this.xDim+this.xLoc-1,e):this.yLoc>0?this.getPreviousY(e):1<<this.frame.precision-1},o.lossless.Decoder.prototype.getPreviousXY=function(e){return this.xLoc>0&&this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc-1,e):this.getPreviousY(e)},o.lossless.Decoder.prototype.getPreviousY=function(e){return this.yLoc>0?this.getter((this.yLoc-1)*this.xDim+this.xLoc,e):this.getPreviousX(e)},o.lossless.Decoder.prototype.isLastPixel=function(){return this.xLoc===this.xDim-1&&this.yLoc===this.yDim-1},o.lossless.Decoder.prototype.outputSingle=function(e){this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(this.yLoc*this.xDim+this.xLoc,this.mask&e[0]),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},o.lossless.Decoder.prototype.outputRGB=function(e){var t=this.yLoc*this.xDim+this.xLoc;this.xLoc<this.xDim&&this.yLoc<this.yDim&&(this.setter(t,e[0],0),this.setter(t,e[1],1),this.setter(t,e[2],2),this.xLoc+=1,this.xLoc>=this.xDim&&(this.yLoc+=1,this.xLoc=0))},o.lossless.Decoder.prototype.setValue8=function(e,t){this.outputData[e]=t},o.lossless.Decoder.prototype.getValue8=function(e){return this.outputData[e]},(n=new ArrayBuffer(2),new DataView(n).setInt16(0,256,!0),256===new Int16Array(n)[0])?(o.lossless.Decoder.prototype.setValue16=o.lossless.Decoder.prototype.setValue8,o.lossless.Decoder.prototype.getValue16=o.lossless.Decoder.prototype.getValue8):(o.lossless.Decoder.prototype.setValue16=function(e,t){this.outputData[e]=(255&t)<<8|t>>8&255},o.lossless.Decoder.prototype.getValue16=function(e){var t=this.outputData[e];return(255&t)<<8|t>>8&255}),o.lossless.Decoder.prototype.setValueRGB=function(e,t,r){this.outputData[3*e+r]=t},o.lossless.Decoder.prototype.getValueRGB=function(e,t){return this.outputData[3*e+t]},o.lossless.Decoder.prototype.readApp=function(){var e=0,t=this.stream.get16();for(e+=2;e<t;)this.stream.get8(),e+=1;return t},o.lossless.Decoder.prototype.readComment=function(){var e,t="",r=0;for(e=this.stream.get16(),r+=2;r<e;)t+=this.stream.get8(),r+=1;return t},o.lossless.Decoder.prototype.readNumber=function(){if(4!==this.stream.get16())throw new Error("ERROR: Define number format throw new IOException [Ld!=4]");return this.stream.get16()},"undefined"!==typeof t&&t.exports&&(t.exports=o.lossless.Decoder)},{"./data-stream.js":2,"./frame-header.js":4,"./huffman-table.js":5,"./quantization-table.js":7,"./scan-header.js":9,"./utils.js":10}],4:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ComponentSpec=n.lossless.ComponentSpec||(void 0!==e?e("./component-spec.js"):null),n.lossless.DataStream=n.lossless.DataStream||(void 0!==e?e("./data-stream.js"):null),n.lossless.FrameHeader=n.lossless.FrameHeader||function(){this.components=[],this.dimX=0,this.dimY=0,this.numComp=0,this.precision=0},n.lossless.FrameHeader.prototype.read=function(e){var t,r,o,i,a=0;for(t=e.get16(),a+=2,this.precision=e.get8(),a+=1,this.dimY=e.get16(),a+=2,this.dimX=e.get16(),a+=2,this.numComp=e.get8(),a+=1,r=1;r<=this.numComp;r+=1){if(a>t)throw new Error("ERROR: frame format error");if(o=e.get8(),(a+=1)>=t)throw new Error("ERROR: frame format error [c>=Lf]");i=e.get8(),a+=1,this.components[o]||(this.components[o]=new n.lossless.ComponentSpec),this.components[o].hSamp=i>>4,this.components[o].vSamp=15&i,this.components[o].quantTableSel=e.get8(),a+=1}if(a!==t)throw new Error("ERROR: frame format error [Lf!=count]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.FrameHeader)},{"./component-spec.js":1,"./data-stream.js":2}],5:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||(void 0!==e?e("./data-stream.js"):null),n.lossless.Utils=n.lossless.Utils||(void 0!==e?e("./utils.js"):null),n.lossless.HuffmanTable=n.lossless.HuffmanTable||function(){this.l=n.lossless.Utils.createArray(4,2,16),this.th=[],this.v=n.lossless.Utils.createArray(4,2,16,200),this.tc=n.lossless.Utils.createArray(4,2),this.tc[0][0]=0,this.tc[1][0]=0,this.tc[2][0]=0,this.tc[3][0]=0,this.tc[0][1]=0,this.tc[1][1]=0,this.tc[2][1]=0,this.tc[3][1]=0,this.th[0]=0,this.th[1]=0,this.th[2]=0,this.th[3]=0},n.lossless.HuffmanTable.MSB=2147483648,n.lossless.HuffmanTable.prototype.read=function(e,t){var r,n,o,i,a,s,u=0;for(r=e.get16(),u+=2;u<r;){if(u+=1,(o=15&(n=e.get8()))>3)throw new Error("ERROR: Huffman table ID > 3");if((i=n>>4)>2)throw new Error("ERROR: Huffman table [Table class > 2 ]");for(this.th[o]=1,this.tc[o][i]=1,a=0;a<16;a+=1)this.l[o][i][a]=e.get8(),u+=1;for(a=0;a<16;a+=1)for(s=0;s<this.l[o][i][a];s+=1){if(u>r)throw new Error("ERROR: Huffman table format error [count>Lh]");this.v[o][i][a][s]=e.get8(),u+=1}}if(u!==r)throw new Error("ERROR: Huffman table format error [count!=Lf]");for(a=0;a<4;a+=1)for(s=0;s<2;s+=1)0!==this.tc[a][s]&&this.buildHuffTable(t[a][s],this.l[a][s],this.v[a][s]);return 1},n.lossless.HuffmanTable.prototype.buildHuffTable=function(e,t,r){var o,i,a,s,u;for(256,i=0,a=0;a<8;a+=1)for(s=0;s<t[a];s+=1)for(u=0;u<256>>a+1;u+=1)e[i]=r[a][s]|a+1<<8,i+=1;for(a=1;i<256;a+=1,i+=1)e[i]=a|n.lossless.HuffmanTable.MSB;for(o=1,i=0,a=8;a<16;a+=1)for(s=0;s<t[a];s+=1){for(u=0;u<256>>a-7;u+=1)e[256*o+i]=r[a][s]|a+1<<8,i+=1;if(i>=256){if(i>256)throw new Error("ERROR: Huffman table error(1)!");i=0,o+=1}}},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.HuffmanTable)},{"./data-stream.js":2,"./utils.js":10}],6:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ComponentSpec=n.lossless.ComponentSpec||(void 0!==e?e("./component-spec.js"):null),n.lossless.DataStream=n.lossless.DataStream||(void 0!==e?e("./data-stream.js"):null),n.lossless.Decoder=n.lossless.Decoder||(void 0!==e?e("./decoder.js"):null),n.lossless.FrameHeader=n.lossless.FrameHeader||(void 0!==e?e("./frame-header.js"):null),n.lossless.HuffmanTable=n.lossless.HuffmanTable||(void 0!==e?e("./huffman-table.js"):null),n.lossless.QuantizationTable=n.lossless.QuantizationTable||(void 0!==e?e("./quantization-table.js"):null),n.lossless.ScanComponent=n.lossless.ScanComponent||(void 0!==e?e("./scan-component.js"):null),n.lossless.ScanHeader=n.lossless.ScanHeader||(void 0!==e?e("./scan-header.js"):null),n.lossless.Utils=n.lossless.Utils||(void 0!==e?e("./utils.js"):null),"undefined"!==typeof t&&t.exports&&(t.exports=n)},{"./component-spec.js":1,"./data-stream.js":2,"./decoder.js":3,"./frame-header.js":4,"./huffman-table.js":5,"./quantization-table.js":7,"./scan-component.js":8,"./scan-header.js":9,"./utils.js":10}],7:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||(void 0!==e?e("./data-stream.js"):null),n.lossless.Utils=n.lossless.Utils||(void 0!==e?e("./utils.js"):null),n.lossless.QuantizationTable=n.lossless.QuantizationTable||function(){this.precision=[],this.tq=[],this.quantTables=n.lossless.Utils.createArray(4,64),this.tq[0]=0,this.tq[1]=0,this.tq[2]=0,this.tq[3]=0},n.lossless.QuantizationTable.enhanceQuantizationTable=function(e,t){var r;for(r=0;r<8;r+=1)e[t[0+r]]*=90,e[t[32+r]]*=90,e[t[16+r]]*=118,e[t[48+r]]*=49,e[t[40+r]]*=71,e[t[8+r]]*=126,e[t[56+r]]*=25,e[t[24+r]]*=106;for(r=0;r<8;r+=1)e[t[0+8*r]]*=90,e[t[4+8*r]]*=90,e[t[2+8*r]]*=118,e[t[6+8*r]]*=49,e[t[5+8*r]]*=71,e[t[1+8*r]]*=126,e[t[7+8*r]]*=25,e[t[3+8*r]]*=106;for(r=0;r<64;r+=1)e[r]>>=6},n.lossless.QuantizationTable.prototype.read=function(e,t){var r,o,i,a,s=0;for(r=e.get16(),s+=2;s<r;){if(s+=1,(i=15&(o=e.get8()))>3)throw new Error("ERROR: Quantization table ID > 3");if(this.precision[i]=o>>4,0===this.precision[i])this.precision[i]=8;else{if(1!==this.precision[i])throw new Error("ERROR: Quantization table precision error");this.precision[i]=16}if(this.tq[i]=1,8===this.precision[i]){for(a=0;a<64;a+=1){if(s>r)throw new Error("ERROR: Quantization table format error");this.quantTables[i][a]=e.get8(),s+=1}n.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[i],t)}else{for(a=0;a<64;a+=1){if(s>r)throw new Error("ERROR: Quantization table format error");this.quantTables[i][a]=e.get16(),s+=2}n.lossless.QuantizationTable.enhanceQuantizationTable(this.quantTables[i],t)}}if(s!==r)throw new Error("ERROR: Quantization table error [count!=Lq]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.QuantizationTable)},{"./data-stream.js":2,"./utils.js":10}],8:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.ScanComponent=n.lossless.ScanComponent||function(){this.acTabSel=0,this.dcTabSel=0,this.scanCompSel=0},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.ScanComponent)},{}],9:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.DataStream=n.lossless.DataStream||(void 0!==e?e("./data-stream.js"):null),n.lossless.ScanComponent=n.lossless.ScanComponent||(void 0!==e?e("./scan-component.js"):null),n.lossless.ScanHeader=n.lossless.ScanHeader||function(){this.ah=0,this.al=0,this.numComp=0,this.selection=0,this.spectralEnd=0,this.components=[]},n.lossless.ScanHeader.prototype.read=function(e){var t,r,o,i=0;for(t=e.get16(),i+=2,this.numComp=e.get8(),i+=1,r=0;r<this.numComp;r+=1){if(this.components[r]=new n.lossless.ScanComponent,i>t)throw new Error("ERROR: scan header format error");this.components[r].scanCompSel=e.get8(),i+=1,o=e.get8(),i+=1,this.components[r].dcTabSel=o>>4,this.components[r].acTabSel=15&o}if(this.selection=e.get8(),i+=1,this.spectralEnd=e.get8(),i+=1,o=e.get8(),this.ah=o>>4,this.al=15&o,(i+=1)!==t)throw new Error("ERROR: scan header format error [count!=Ns]");return 1},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.ScanHeader)},{"./data-stream.js":2,"./scan-component.js":8}],10:[function(e,t,r){"use strict";var n=n||{};n.lossless=n.lossless||{},n.lossless.Utils=n.lossless.Utils||{},n.lossless.Utils.createArray=function(e){var t=new Array(e||0),r=e;if(arguments.length>1)for(var o=Array.prototype.slice.call(arguments,1);r--;)t[e-1-r]=n.lossless.Utils.createArray.apply(this,o);return t},n.lossless.Utils.makeCRCTable=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t},n.lossless.Utils.crc32=function(e){for(var t=new Uint8Array(e.buffer),r=n.lossless.Utils.crcTable||(n.lossless.Utils.crcTable=n.lossless.Utils.makeCRCTable()),o=-1,i=0;i<t.length;i++)o=o>>>8^r[255&(o^t[i])];return(-1^o)>>>0},"undefined"!==typeof t&&t.exports&&(t.exports=n.lossless.Utils)},{}]},{},[6])(6)}))},8327:(e,t,r)=>{var n,o=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,o=void 0!==(e=e||{})?e:{},i={};for(t in o)o.hasOwnProperty(t)&&(i[t]=o[t]);var a=[],s=!1,u=!1,l=!1,c=!1;s="object"==typeof window,u="function"==typeof importScripts,l="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!s&&!u,c=!s&&!l&&!u;var f,p,d,h,m="";function y(e){return o.locateFile?o.locateFile(e,m):m+e}l?(m="//",f=function(e,t){return d||(d=r(981)),h||(h=r(1209)),e=h.normalize(e),d.readFileSync(e,t?null:"utf8")},p=function(e){var t=f(e,!0);return t.buffer||(t=new Uint8Array(t)),C(t.buffer),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),a=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Nr))throw e})),process.on("unhandledRejection",pe),o.inspect=function(){return"[Emscripten Module object]"}):c?("undefined"!=typeof read&&(f=function(e){return read(e)}),p=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(C("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?a=scriptArgs:void 0!==arguments&&(a=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||u)&&(u?m=self.location.href:document.currentScript&&(m=document.currentScript.src),n&&(m=n),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",f=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var g=o.print||console.log.bind(console),v=o.printErr||console.warn.bind(console);for(t in i)i.hasOwnProperty(t)&&(o[t]=i[t]);i=null,o.arguments&&(a=o.arguments),o.thisProgram&&o.thisProgram,o.quit&&o.quit;var b,w,_=function(e){};o.wasmBinary&&(b=o.wasmBinary),o.noExitRuntime&&o.noExitRuntime,"object"!=typeof WebAssembly&&v("no native wasm support detected");var T=new WebAssembly.Table({initial:181,maximum:181,element:"anyfunc"}),P=!1;function C(e,t){e||pe("Assertion failed: "+t)}function x(e){var t=o["_"+e];return C(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function D(e,t,r,n,o){var i={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);O(e,t=Vr(r),r)}return t},array:function(e){var t=Vr(e.length);return k(e,t),t}},a=x(e),s=[],u=0;if(n)for(var l=0;l<n.length;l++){var c=i[r[l]];c?(0===u&&(u=Mr()),s[l]=c(n[l])):s[l]=n[l]}var f=a.apply(null,s);return f=function(e){return"string"===t?$(e):"boolean"===t?Boolean(e):e}(f),0!==u&&Hr(u),f}var A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.subarray&&A)return A.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var l=a-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function $(e,t){return e?S(F,e,t):""}function E(e,t,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function O(e,t,r){return E(e,F,t,r)}function j(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}function k(e,t){I.set(e,t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var R,I,F,L,U,B,W,M,V,H=65536;function N(e,t){return e%t>0&&(e+=t-e%t),e}function z(e){R=e,o.HEAP8=I=new Int8Array(e),o.HEAP16=L=new Int16Array(e),o.HEAP32=B=new Int32Array(e),o.HEAPU8=F=new Uint8Array(e),o.HEAPU16=U=new Uint16Array(e),o.HEAPU32=W=new Uint32Array(e),o.HEAPF32=M=new Float32Array(e),o.HEAPF64=V=new Float64Array(e)}var q=5289088,G=46048,Y=o.TOTAL_MEMORY||1073741824;function X(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?o.dynCall_v(r):o.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}(w=o.wasmMemory?o.wasmMemory:new WebAssembly.Memory({initial:Y/H}))&&(R=w.buffer),Y=R.byteLength,z(R),B[G>>2]=q;var J=[],Q=[],Z=[],K=[],ee=[];function te(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)ie(o.preRun.shift());X(J)}function re(){X(Q)}function ne(){X(Z)}function oe(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)ae(o.postRun.shift());X(ee)}function ie(e){J.unshift(e)}function ae(e){ee.unshift(e)}Math.abs,Math.ceil,Math.floor,Math.min;var se=0,ue=null,le=null;function ce(e){se++,o.monitorRunDependencies&&o.monitorRunDependencies(se)}function fe(e){if(se--,o.monitorRunDependencies&&o.monitorRunDependencies(se),0==se&&(null!==ue&&(clearInterval(ue),ue=null),le)){var t=le;le=null,t()}}function pe(e){throw o.onAbort&&o.onAbort(e),g(e+=""),v(e),P=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}o.preloadedImages={},o.preloadedAudios={};var de="data:application/octet-stream;base64,";function he(e){return String.prototype.startsWith?e.startsWith(de):0===e.indexOf(de)}var me="charlswasm_decode.wasm";function ye(){try{if(b)return new Uint8Array(b);if(p)return p(me);throw"both async and sync fetching of the wasm failed"}catch(e){pe(e)}}function ge(){return b||!s&&!u||"function"!=typeof fetch?new Promise((function(e,t){e(ye())})):fetch(me,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+me+"'";return e.arrayBuffer()})).catch((function(){return ye()}))}function ve(){var e={env:kr,wasi_snapshot_preview1:kr};function t(e,t){var r=e.exports;o.asm=r,fe()}function r(e){t(e.instance)}function n(t){return ge().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){v("failed to asynchronously prepare wasm: "+e),pe(e)}))}if(ce(),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(e){return v("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(b||"function"!=typeof WebAssembly.instantiateStreaming||he(me)||"function"!=typeof fetch)return n(r);fetch(me,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),n(r)}))}))}(),{}}function be(e){return Lr(e)}function we(e,t){K.unshift({func:e,arg:t})}function _e(){return we.apply(null,arguments)}function Te(){return we.apply(null,arguments)}he(me)||(me=y(me)),Q.push({func:function(){Fr()}});var Pe={};function Ce(e,t,r){throw Pe[e]={ptr:e,adjusted:[e],type:t,destructor:r,refcount:0,caught:!1,rethrown:!1},"uncaught_exception"in Ur?Ur.uncaught_exceptions++:Ur.uncaught_exceptions=1,e}var xe={};function De(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Ae(e){return this.fromWireType(W[e>>2])}var Se={},$e={},Ee={},Oe=48,je=57;function ke(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Oe&&t<=je?"_"+e:e}function Re(e,t){return e=ke(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Ie(e,t){var r=Re(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Fe=void 0;function Le(e){throw new Fe(e)}function Ue(e,t,r){function n(t){var n=r(t);n.length!==e.length&&Le("Mismatched type converter count");for(var o=0;o<e.length;++o)qe(e[o],n[o])}e.forEach((function(e){Ee[e]=t}));var o=new Array(t.length),i=[],a=0;t.forEach((function(e,t){$e.hasOwnProperty(e)?o[t]=$e[e]:(i.push(e),Se.hasOwnProperty(e)||(Se[e]=[]),Se[e].push((function(){o[t]=$e[e],++a===i.length&&n(o)})))})),0===i.length&&n(o)}function Be(e){var t=xe[e];delete xe[e];var r=t.rawConstructor,n=t.rawDestructor,o=t.fields;Ue([e],o.map((function(e){return e.getterReturnType})).concat(o.map((function(e){return e.setterArgumentType}))),(function(e){var i={};return o.forEach((function(t,r){var n=t.fieldName,a=e[r],s=t.getter,u=t.getterContext,l=e[r+o.length],c=t.setter,f=t.setterContext;i[n]={read:function(e){return a.fromWireType(s(u,e))},write:function(e,t){var r=[];c(f,e,l.toWireType(r,t)),De(r)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var r in i)t[r]=i[r].read(e);return n(e),t},toWireType:function(e,t){for(var o in i)if(!(o in t))throw new TypeError("Missing field");var a=r();for(o in i)i[o].write(a,t[o]);return null!==e&&e.push(n,a),a},argPackAdvance:8,readValueFromPointer:Ae,destructorFunction:n}]}))}function We(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Me(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Ve=e}var Ve=void 0;function He(e){for(var t="",r=e;F[r];)t+=Ve[F[r++]];return t}var Ne=void 0;function ze(e){throw new Ne(e)}function qe(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||ze('type "'+n+'" must have a positive integer typeid pointer'),$e.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;ze("Cannot register type '"+n+"' twice")}if($e[e]=t,delete Ee[e],Se.hasOwnProperty(e)){var o=Se[e];delete Se[e],o.forEach((function(e){e()}))}}function Ge(e,t,r,n,o){var i=We(r);qe(e,{name:t=He(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:o},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=I;else if(2===r)n=L;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=B}return this.fromWireType(n[e>>i])},destructorFunction:null})}function Ye(e){if(!(this instanceof ct))return!1;if(!(e instanceof ct))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return t===n&&r===o}function Xe(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Je(e){ze(e.$$.ptrType.registeredClass.name+" instance already deleted")}var Qe=!1;function Ze(e){}function Ke(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function et(e){e.count.value-=1,0===e.count.value&&Ke(e)}function tt(e){return"undefined"==typeof FinalizationGroup?(tt=function(e){return e},e):(Qe=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?et(r):console.warn("object already deleted: "+r.ptr)}})),tt=function(e){return Qe.register(e,e.$$,e.$$),e},Ze=function(e){Qe.unregister(e.$$)},tt(e))}function rt(){if(this.$$.ptr||Je(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=tt(Object.create(Object.getPrototypeOf(this),{$$:{value:Xe(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function nt(){this.$$.ptr||Je(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),Ze(this),et(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ot(){return!this.$$.ptr}var it=void 0,at=[];function st(){for(;at.length;){var e=at.pop();e.$$.deleteScheduled=!1,e.delete()}}function ut(){return this.$$.ptr||Je(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),at.push(this),1===at.length&&it&&it(st),this.$$.deleteScheduled=!0,this}function lt(){ct.prototype.isAliasOf=Ye,ct.prototype.clone=rt,ct.prototype.delete=nt,ct.prototype.isDeleted=ot,ct.prototype.deleteLater=ut}function ct(){}var ft={};function pt(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ze("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function dt(e,t,r){o.hasOwnProperty(e)?((void 0===r||void 0!==o[e].overloadTable&&void 0!==o[e].overloadTable[r])&&ze("Cannot register public name '"+e+"' twice"),pt(o,e,e),o.hasOwnProperty(r)&&ze("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),o[e].overloadTable[r]=t):(o[e]=t,void 0!==r&&(o[e].numArguments=r))}function ht(e,t,r,n,o,i,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function mt(e,t,r){for(;t!==r;)t.upcast||ze("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function yt(e,t){if(null===t)return this.isReference&&ze("null is not a valid "+this.name),0;t.$$||ze('Cannot pass "'+Kt(t)+'" as a '+this.name),t.$$.ptr||ze("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return mt(t.$$.ptr,r,this.registeredClass)}function gt(e,t){var r;if(null===t)return this.isReference&&ze("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||ze('Cannot pass "'+Kt(t)+'" as a '+this.name),t.$$.ptr||ze("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ze("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=mt(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&ze("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:ze("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var o=t.clone();r=this.rawShare(r,Qt((function(){o.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:ze("Unsupporting sharing policy")}return r}function vt(e,t){if(null===t)return this.isReference&&ze("null is not a valid "+this.name),0;t.$$||ze('Cannot pass "'+Kt(t)+'" as a '+this.name),t.$$.ptr||ze("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ze("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return mt(t.$$.ptr,r,this.registeredClass)}function bt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function wt(e){this.rawDestructor&&this.rawDestructor(e)}function _t(e){null!==e&&e.delete()}function Tt(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=Tt(e,t,r.baseClass);return null===n?null:r.downcast(n)}function Pt(){return Object.keys(At).length}function Ct(){var e=[];for(var t in At)At.hasOwnProperty(t)&&e.push(At[t]);return e}function xt(e){it=e,at.length&&it&&it(st)}function Dt(){o.getInheritedInstanceCount=Pt,o.getLiveInheritedInstances=Ct,o.flushPendingDeletes=st,o.setDelayFunction=xt}var At={};function St(e,t){for(void 0===t&&ze("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function $t(e,t){return t=St(e,t),At[t]}function Et(e,t){return t.ptrType&&t.ptr||Le("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Le("Both smartPtrType and smartPtr must be specified"),t.count={value:1},tt(Object.create(e,{$$:{value:t}}))}function Ot(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=$t(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function o(){return this.isSmartPointer?Et(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Et(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,a=this.registeredClass.getActualType(t),s=ft[a];if(!s)return o.call(this);i=this.isConst?s.constPointerType:s.pointerType;var u=Tt(t,this.registeredClass,i.registeredClass);return null===u?o.call(this):this.isSmartPointer?Et(i.registeredClass.instancePrototype,{ptrType:i,ptr:u,smartPtrType:this,smartPtr:e}):Et(i.registeredClass.instancePrototype,{ptrType:i,ptr:u})}function jt(){kt.prototype.getPointee=bt,kt.prototype.destructor=wt,kt.prototype.argPackAdvance=8,kt.prototype.readValueFromPointer=Ae,kt.prototype.deleteObject=_t,kt.prototype.fromWireType=Ot}function kt(e,t,r,n,o,i,a,s,u,l,c){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=c,o||void 0!==t.baseClass?this.toWireType=gt:n?(this.toWireType=yt,this.destructorFunction=null):(this.toWireType=vt,this.destructorFunction=null)}function Rt(e,t,r){o.hasOwnProperty(e)||Le("Replacing nonexistant public symbol"),void 0!==o[e].overloadTable&&void 0!==r?o[e].overloadTable[r]=t:(o[e]=t,o[e].argCount=r)}function It(e,t){var r;if(e=He(e),void 0!==o["FUNCTION_TABLE_"+e])r=o["FUNCTION_TABLE_"+e][t];else if("undefined"!=typeof FUNCTION_TABLE)r=FUNCTION_TABLE[t];else{var n=o["dynCall_"+e];void 0===n&&void 0===(n=o["dynCall_"+e.replace(/f/g,"d")])&&ze("No dynCall invoker for signature: "+e),r=function(r){for(var n=[],o=1;o<e.length;++o)n.push("a"+o);var i="return function dynCall_"+e+"_"+t+"("+n.join(", ")+") {\n";return i+="    return dynCall(rawFunction"+(n.length?", ":"")+n.join(", ")+");\n",i+="};\n",new Function("dynCall","rawFunction",i)(r,t)}(n)}return"function"!=typeof r&&ze("unknown function pointer with signature "+e+": "+t),r}var Ft=void 0;function Lt(e){var t=Wr(e),r=He(t);return Br(t),r}function Ut(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||$e[t]||(Ee[t]?Ee[t].forEach(e):(r.push(t),n[t]=!0))})),new Ft(e+": "+r.map(Lt).join([", "]))}function Bt(e,t,r,n,o,i,a,s,u,l,c,f,p){c=He(c),i=It(o,i),s&&(s=It(a,s)),l&&(l=It(u,l)),p=It(f,p);var d=ke(c);dt(d,(function(){Ut("Cannot construct "+c+" due to unbound types",[n])})),Ue([e,t,r],n?[n]:[],(function(t){var r,o;t=t[0],o=n?(r=t.registeredClass).instancePrototype:ct.prototype;var a=Re(d,(function(){if(Object.getPrototypeOf(this)!==u)throw new Ne("Use 'new' to construct "+c);if(void 0===f.constructor_body)throw new Ne(c+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new Ne("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(o,{constructor:{value:a}});a.prototype=u;var f=new ht(c,a,u,p,r,i,s,l),h=new kt(c,f,!0,!1,!1),m=new kt(c+"*",f,!1,!1,!1),y=new kt(c+" const*",f,!1,!0,!1);return ft[e]={pointerType:m,constPointerType:y},Rt(d,a),[h,m,y]}))}function Wt(e,t){for(var r=[],n=0;n<e;n++)r.push(B[(t>>2)+n]);return r}function Mt(e,t,r,n,o,i){C(t>0);var a=Wt(t,r);o=It(n,o);var s=[i],u=[];Ue([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Ne("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Ut("Cannot construct "+e.name+" due to unbound types",a)},Ue([],a,(function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&ze(r+" called with "+arguments.length+" arguments, expected "+(t-1)),u.length=0,s.length=t;for(var e=1;e<t;++e)s[e]=n[e].toWireType(u,arguments[e-1]);var i=o.apply(null,s);return De(u),n[0].fromWireType(i)},[]})),[]}))}function Vt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=Re(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,o=e.apply(n,t);return o instanceof Object?o:n}function Ht(e,t,r,n,o){var i=t.length;i<2&&ze("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var l="void"!==t[0].name,c="",f="";for(u=0;u<i-2;++u)c+=(0!==u?", ":"")+"arg"+u,f+=(0!==u?", ":"")+"arg"+u+"Wired";var p="return function "+ke(e)+"("+c+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";s&&(p+="var destructors = [];\n");var d=s?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[ze,n,o,De,t[0],t[1]];for(a&&(p+="var thisWired = classParam.toWireType("+d+", this);\n"),u=0;u<i-2;++u)p+="var arg"+u+"Wired = argType"+u+".toWireType("+d+", arg"+u+"); // "+t[u+2].name+"\n",h.push("argType"+u),m.push(t[u+2]);if(a&&(f="thisWired"+(f.length>0?", ":"")+f),p+=(l?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",s)p+="runDestructors(destructors);\n";else for(u=a?1:2;u<t.length;++u){var y=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(p+=y+"_dtor("+y+"); // "+t[u].name+"\n",h.push(y+"_dtor"),m.push(t[u].destructorFunction))}return l&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",h.push(p),Vt(Function,h).apply(null,m)}function Nt(e,t,r,n,o,i,a,s){var u=Wt(r,n);t=He(t),i=It(o,i),Ue([],[e],(function(e){var n=(e=e[0]).name+"."+t;function o(){Ut("Cannot call "+n+" due to unbound types",u)}s&&e.registeredClass.pureVirtualFunctions.push(t);var l=e.registeredClass.instancePrototype,c=l[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===r-2?(o.argCount=r-2,o.className=e.name,l[t]=o):(pt(l,t,n),l[t].overloadTable[r-2]=o),Ue([],u,(function(o){var s=Ht(n,o,e,i,a);return void 0===l[t].overloadTable?(s.argCount=r-2,l[t]=s):l[t].overloadTable[r-2]=s,[]})),[]}))}var zt=[],qt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Gt(e){e>4&&0==--qt[e].refcount&&(qt[e]=void 0,zt.push(e))}function Yt(){for(var e=0,t=5;t<qt.length;++t)void 0!==qt[t]&&++e;return e}function Xt(){for(var e=5;e<qt.length;++e)if(void 0!==qt[e])return qt[e];return null}function Jt(){o.count_emval_handles=Yt,o.get_first_emval=Xt}function Qt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=zt.length?zt.pop():qt.length;return qt[t]={refcount:1,value:e},t}}function Zt(e,t){qe(e,{name:t=He(t),fromWireType:function(e){var t=qt[e].value;return Gt(e),t},toWireType:function(e,t){return Qt(t)},argPackAdvance:8,readValueFromPointer:Ae,destructorFunction:null})}function Kt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function er(e,t){switch(t){case 2:return function(e){return this.fromWireType(M[e>>2])};case 3:return function(e){return this.fromWireType(V[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function tr(e,t,r){var n=We(r);qe(e,{name:t=He(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Kt(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:er(t,n),destructorFunction:null})}function rr(e,t,r,n,o,i){var a=Wt(t,r);e=He(e),o=It(n,o),dt(e,(function(){Ut("Cannot call "+e+" due to unbound types",a)}),t-1),Ue([],a,(function(r){var n=[r[0],null].concat(r.slice(1));return Rt(e,Ht(e,n,null,o,i),t-1),[]}))}function nr(e,t,r){switch(t){case 0:return r?function(e){return I[e]}:function(e){return F[e]};case 1:return r?function(e){return L[e>>1]}:function(e){return U[e>>1]};case 2:return r?function(e){return B[e>>2]}:function(e){return W[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function or(e,t,r,n,o){t=He(t),-1===o&&(o=4294967295);var i=We(r),a=function(e){return e};if(0===n){var s=32-8*r;a=function(e){return e<<s>>>s}}var u=-1!=t.indexOf("unsigned");qe(e,{name:t,fromWireType:a,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+Kt(r)+'" to '+this.name);if(r<n||r>o)throw new TypeError('Passing a number "'+Kt(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+o+"]!");return u?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:nr(t,i,0!==n),destructorFunction:null})}function ir(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=W,r=t[e>>=2],o=t[e+1];return new n(t.buffer,o,r)}qe(e,{name:r=He(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function ar(e,t){var r="std::string"===(t=He(t));qe(e,{name:t,fromWireType:function(e){var t,n=W[e>>2];if(r){var o=F[e+4+n],i=0;0!=o&&(i=o,F[e+4+n]=0);for(var a=e+4,s=0;s<=n;++s){var u=e+4+s;if(0==F[u]){var l=$(a);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),a=u+1}}0!=i&&(F[e+4+n]=i)}else{var c=new Array(n);for(s=0;s<n;++s)c[s]=String.fromCharCode(F[e+4+s]);t=c.join("")}return Br(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ze("Cannot pass non-string to std::string");var o=(r&&n?function(){return j(t)}:function(){return t.length})(),i=Lr(4+o+1);if(W[i>>2]=o,r&&n)O(t,i+4,o+1);else if(n)for(var a=0;a<o;++a){var s=t.charCodeAt(a);s>255&&(Br(i),ze("String has UTF-16 code units that do not fit in 8 bits")),F[i+4+a]=s}else for(a=0;a<o;++a)F[i+4+a]=t[a];return null!==e&&e.push(Br,i),i},argPackAdvance:8,readValueFromPointer:Ae,destructorFunction:function(e){Br(e)}})}function sr(e,t,r){var n,o;r=He(r),2===t?(n=function(){return U},o=1):4===t&&(n=function(){return W},o=2),qe(e,{name:r,fromWireType:function(e){for(var t=n(),r=W[e>>2],i=new Array(r),a=e+4>>o,s=0;s<r;++s)i[s]=String.fromCharCode(t[a+s]);return Br(e),i.join("")},toWireType:function(e,r){var i=r.length,a=Lr(4+i*t),s=n();W[a>>2]=i;for(var u=a+4>>o,l=0;l<i;++l)s[u+l]=r.charCodeAt(l);return null!==e&&e.push(Br,a),a},argPackAdvance:8,readValueFromPointer:Ae,destructorFunction:function(e){Br(e)}})}function ur(e,t,r,n,o,i){xe[e]={name:He(t),rawConstructor:It(r,n),rawDestructor:It(o,i),fields:[]}}function lr(e,t,r,n,o,i,a,s,u,l){xe[e].fields.push({fieldName:He(t),getterReturnType:r,getter:It(n,o),getterContext:i,setterArgumentType:a,setter:It(s,u),setterContext:l})}function cr(e,t){qe(e,{isVoid:!0,name:t=He(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}var fr={};function pr(e){var t=fr[e];return void 0===t?He(e):t}function dr(){return"object"==typeof globalThis?globalThis:Function("return this")()}function hr(e){return 0===e?Qt(dr()):(e=pr(e),Qt(dr()[e]))}function mr(e){e>4&&(qt[e].refcount+=1)}function yr(e,t){var r=$e[e];return void 0===r&&ze(t+" has unknown type "+Lt(e)),r}function gr(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var n="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n";for(r=0;r<e;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >> 2) + "+r+'], "parameter '+r+'");\nvar arg'+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\n";return n+="var obj = new constructor("+t+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",n)(yr,o,Qt)}var vr={};function br(e){return e||ze("Cannot use deleted val. handle = "+e),qt[e].value}function wr(e,t,r,n){e=br(e);var o=vr[t];return o||(o=gr(t),vr[t]=o),o(e,r,n)}function _r(e,t){return Qt((e=yr(e,"_emval_take_value")).readValueFromPointer(t))}function Tr(){pe()}function Pr(){return I.length}function Cr(){return 46048}function xr(e,t,r){F.set(F.subarray(t,t+r),e)}function Dr(e){try{return w.grow(e-R.byteLength+65535>>16),z(w.buffer),1}catch(e){}}function Ar(e){var t=Pr(),r=65536,n=2147418112;if(e>n)return!1;for(var o=Math.max(t,16777216);o<e;)o=o<=536870912?N(2*o,r):Math.min(N((3*o+2147483648)/4,r),n);return!!Dr(o)}var Sr={buffers:[null,[],[]],printChar:function(e,t){var r=Sr.buffers[e];0===t||10===t?((1===e?g:v)(S(r,0)),r.length=0):r.push(t)},varargs:0,get:function(e){return Sr.varargs+=4,B[Sr.varargs-4>>2]},getStr:function(){return $(Sr.get())},get64:function(){var e=Sr.get();return Sr.get(),e},getZero:function(){Sr.get()}};function $r(e){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||pe(e),e.errno}}function Er(e,t,r,n,o){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||pe(e),e.errno}}function Or(e,t,r,n){try{for(var o=0,i=0;i<r;i++){for(var a=B[t+8*i>>2],s=B[t+(8*i+4)>>2],u=0;u<s;u++)Sr.printChar(e,F[a+u]);o+=s}return B[n>>2]=o,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||pe(e),e.errno}}function jr(e){_(0|e)}Fe=o.InternalError=Ie(Error,"InternalError"),Me(),Ne=o.BindingError=Ie(Error,"BindingError"),lt(),jt(),Dt(),Ft=o.UnboundTypeError=Ie(Error,"UnboundTypeError"),Jt();var kr={__cxa_allocate_exception:be,__cxa_atexit:_e,__cxa_thread_atexit:Te,__cxa_throw:Ce,_embind_finalize_value_object:Be,_embind_register_bool:Ge,_embind_register_class:Bt,_embind_register_class_constructor:Mt,_embind_register_class_function:Nt,_embind_register_emval:Zt,_embind_register_float:tr,_embind_register_function:rr,_embind_register_integer:or,_embind_register_memory_view:ir,_embind_register_std_string:ar,_embind_register_std_wstring:sr,_embind_register_value_object:ur,_embind_register_value_object_field:lr,_embind_register_void:cr,_emval_decref:Gt,_emval_get_global:hr,_emval_incref:mr,_emval_new:wr,_emval_take_value:_r,abort:Tr,emscripten_get_sbrk_ptr:Cr,emscripten_memcpy_big:xr,emscripten_resize_heap:Ar,fd_close:$r,fd_seek:Er,fd_write:Or,memory:w,setTempRet0:jr,table:T},Rr=ve();o.asm=Rr;var Ir,Fr=o.___wasm_call_ctors=function(){return o.asm.__wasm_call_ctors.apply(null,arguments)},Lr=o._malloc=function(){return o.asm.malloc.apply(null,arguments)},Ur=(o._setThrew=function(){return o.asm.setThrew.apply(null,arguments)},o.__ZSt18uncaught_exceptionv=function(){return o.asm._ZSt18uncaught_exceptionv.apply(null,arguments)}),Br=o._free=function(){return o.asm.free.apply(null,arguments)},Wr=o.___getTypeName=function(){return o.asm.__getTypeName.apply(null,arguments)},Mr=(o.___embind_register_native_and_builtin_types=function(){return o.asm.__embind_register_native_and_builtin_types.apply(null,arguments)},o.stackSave=function(){return o.asm.stackSave.apply(null,arguments)}),Vr=o.stackAlloc=function(){return o.asm.stackAlloc.apply(null,arguments)},Hr=o.stackRestore=function(){return o.asm.stackRestore.apply(null,arguments)};function Nr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function zr(e){function t(){Ir||(Ir=!0,P||(re(),ne(),o.onRuntimeInitialized&&o.onRuntimeInitialized(),oe()))}e=e||a,se>0||(te(),se>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}if(o.__growWasmMemory=function(){return o.asm.__growWasmMemory.apply(null,arguments)},o.dynCall_i=function(){return o.asm.dynCall_i.apply(null,arguments)},o.dynCall_vi=function(){return o.asm.dynCall_vi.apply(null,arguments)},o.dynCall_iii=function(){return o.asm.dynCall_iii.apply(null,arguments)},o.dynCall_viii=function(){return o.asm.dynCall_viii.apply(null,arguments)},o.dynCall_ii=function(){return o.asm.dynCall_ii.apply(null,arguments)},o.dynCall_iiii=function(){return o.asm.dynCall_iiii.apply(null,arguments)},o.dynCall_vii=function(){return o.asm.dynCall_vii.apply(null,arguments)},o.dynCall_viiii=function(){return o.asm.dynCall_viiii.apply(null,arguments)},o.dynCall_v=function(){return o.asm.dynCall_v.apply(null,arguments)},o.dynCall_iidiiii=function(){return o.asm.dynCall_iidiiii.apply(null,arguments)},o.dynCall_jiji=function(){return o.asm.dynCall_jiji.apply(null,arguments)},o.dynCall_viiiiii=function(){return o.asm.dynCall_viiiiii.apply(null,arguments)},o.dynCall_viiiii=function(){return o.asm.dynCall_viiiii.apply(null,arguments)},o.asm=Rr,o.ccall=D,o.then=function(e){if(Ir)e(o);else{var t=o.onRuntimeInitialized;o.onRuntimeInitialized=function(){t&&t(),e(o)}}return o},le=function e(){Ir||zr(),Ir||(le=e)},o.run=zr,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return zr(),e});e.exports=o},9400:(e,t,r)=>{var n,o=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,o=void 0!==(e=e||{})?e:{},i={};for(t in o)o.hasOwnProperty(t)&&(i[t]=o[t]);var a=[],s="./this.program",u=function(e,t){throw t},l=!1,c=!1,f=!1,p=!1;l="object"==typeof window,c="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!l&&!c,p=!l&&!f&&!c;var d,h,m,y,g="";function v(e){return o.locateFile?o.locateFile(e,g):g+e}f?(g="//",d=function(e,t){return m||(m=r(1973)),y||(y=r(378)),e=y.normalize(e),m.readFileSync(e,t?null:"utf8")},h=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),$(t.buffer),t},process.argv.length>1&&(s=process.argv[1].replace(/\\/g,"/")),a=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof bn))throw e})),process.on("unhandledRejection",be),u=function(e){process.exit(e)},o.inspect=function(){return"[Emscripten Module object]"}):p?("undefined"!=typeof read&&(d=function(e){return read(e)}),h=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):($("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?a=scriptArgs:void 0!==arguments&&(a=arguments),"function"==typeof quit&&(u=function(e){quit(e)}),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(l||c)&&(c?g=self.location.href:document.currentScript&&(g=document.currentScript.src),n&&(g=n),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},c&&(h=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var b=o.print||console.log.bind(console),w=o.printErr||console.warn.bind(console);for(t in i)i.hasOwnProperty(t)&&(o[t]=i[t]);i=null,o.arguments&&(a=o.arguments),o.thisProgram&&(s=o.thisProgram),o.quit&&(u=o.quit);var _,T,P,C=0,x=function(e){C=e},D=function(){return C};o.wasmBinary&&(_=o.wasmBinary),o.noExitRuntime&&(T=o.noExitRuntime),"object"!=typeof WebAssembly&&w("no native wasm support detected");var A=new WebAssembly.Table({initial:204,maximum:204,element:"anyfunc"}),S=!1;function $(e,t){e||be("Assertion failed: "+t)}function E(e){var t=o["_"+e];return $(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function O(e,t,r,n,o){var i={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);F(e,t=pn(r),r)}return t},array:function(e){var t=pn(e.length);return U(e,t),t}},a=E(e),s=[],u=0;if(n)for(var l=0;l<n.length;l++){var c=i[r[l]];c?(0===u&&(u=fn()),s[l]=c(n[l])):s[l]=n[l]}var f=a.apply(null,s);return f=function(e){return"string"===t?R(e):"boolean"===t?Boolean(e):e}(f),0!==u&&dn(u),f}var j="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.subarray&&j)return j.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var l=a-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function R(e,t){return e?k(V,e,t):""}function I(e,t,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function F(e,t,r){return I(e,V,t,r)}function L(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}function U(e,t){M.set(e,t)}function B(e,t,r){for(var n=0;n<e.length;++n)M[t++>>0]=e.charCodeAt(n);r||(M[t>>0]=0)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var W,M,V,H,N,z,q,G,Y,X=65536;function J(e,t){return e%t>0&&(e+=t-e%t),e}function Q(e){W=e,o.HEAP8=M=new Int8Array(e),o.HEAP16=H=new Int16Array(e),o.HEAP32=z=new Int32Array(e),o.HEAPU8=V=new Uint8Array(e),o.HEAPU16=N=new Uint16Array(e),o.HEAPU32=q=new Uint32Array(e),o.HEAPF32=G=new Float32Array(e),o.HEAPF64=Y=new Float64Array(e)}var Z=5258768,K=15728,ee=o.TOTAL_MEMORY||1073741824;function te(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?o.dynCall_v(r):o.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}(P=o.wasmMemory?o.wasmMemory:new WebAssembly.Memory({initial:ee/X}))&&(W=P.buffer),ee=W.byteLength,Q(W),z[K>>2]=Z;var re=[],ne=[],oe=[],ie=[],ae=[];function se(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)pe(o.preRun.shift());te(re)}function ue(){te(ne)}function le(){te(oe)}function ce(){}function fe(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)de(o.postRun.shift());te(ae)}function pe(e){re.unshift(e)}function de(e){ae.unshift(e)}Math.abs,Math.ceil,Math.floor,Math.min;var he=0,me=null,ye=null;function ge(e){he++,o.monitorRunDependencies&&o.monitorRunDependencies(he)}function ve(e){if(he--,o.monitorRunDependencies&&o.monitorRunDependencies(he),0==he&&(null!==me&&(clearInterval(me),me=null),ye)){var t=ye;ye=null,t()}}function be(e){throw o.onAbort&&o.onAbort(e),b(e+=""),w(e),S=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}o.preloadedImages={},o.preloadedAudios={};var we="data:application/octet-stream;base64,";function _e(e){return String.prototype.startsWith?e.startsWith(we):0===e.indexOf(we)}var Te="libjpegturbowasm_decode.wasm";function Pe(){try{if(_)return new Uint8Array(_);if(h)return h(Te);throw"both async and sync fetching of the wasm failed"}catch(e){be(e)}}function Ce(){return _||!l&&!c||"function"!=typeof fetch?new Promise((function(e,t){e(Pe())})):fetch(Te,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Te+"'";return e.arrayBuffer()})).catch((function(){return Pe()}))}function xe(){var e={env:Xr,wasi_snapshot_preview1:Xr};function t(e,t){var r=e.exports;o.asm=r,ve()}function r(e){t(e.instance)}function n(t){return Ce().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){w("failed to asynchronously prepare wasm: "+e),be(e)}))}if(ge(),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(_||"function"!=typeof WebAssembly.instantiateStreaming||_e(Te)||"function"!=typeof fetch)return n(r);fetch(Te,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),n(r)}))}))}(),{}}function De(e){return Kr(e)}function Ae(e,t){ie.unshift({func:e,arg:t})}function Se(){return Ae.apply(null,arguments)}_e(Te)||(Te=v(Te)),ne.push({func:function(){Zr()}});var $e={};function Ee(e,t,r){throw $e[e]={ptr:e,adjusted:[e],type:t,destructor:r,refcount:0,caught:!1,rethrown:!1},"uncaught_exception"in nn?nn.uncaught_exceptions++:nn.uncaught_exceptions=1,e}var Oe={};function je(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ke(e){return this.fromWireType(q[e>>2])}var Re={},Ie={},Fe={},Le=48,Ue=57;function Be(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Le&&t<=Ue?"_"+e:e}function We(e,t){return e=Be(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Me(e,t){var r=We(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Ve=void 0;function He(e){throw new Ve(e)}function Ne(e,t,r){function n(t){var n=r(t);n.length!==e.length&&He("Mismatched type converter count");for(var o=0;o<e.length;++o)Ze(e[o],n[o])}e.forEach((function(e){Fe[e]=t}));var o=new Array(t.length),i=[],a=0;t.forEach((function(e,t){Ie.hasOwnProperty(e)?o[t]=Ie[e]:(i.push(e),Re.hasOwnProperty(e)||(Re[e]=[]),Re[e].push((function(){o[t]=Ie[e],++a===i.length&&n(o)})))})),0===i.length&&n(o)}function ze(e){var t=Oe[e];delete Oe[e];var r=t.rawConstructor,n=t.rawDestructor,o=t.fields;Ne([e],o.map((function(e){return e.getterReturnType})).concat(o.map((function(e){return e.setterArgumentType}))),(function(e){var i={};return o.forEach((function(t,r){var n=t.fieldName,a=e[r],s=t.getter,u=t.getterContext,l=e[r+o.length],c=t.setter,f=t.setterContext;i[n]={read:function(e){return a.fromWireType(s(u,e))},write:function(e,t){var r=[];c(f,e,l.toWireType(r,t)),je(r)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var r in i)t[r]=i[r].read(e);return n(e),t},toWireType:function(e,t){for(var o in i)if(!(o in t))throw new TypeError("Missing field");var a=r();for(o in i)i[o].write(a,t[o]);return null!==e&&e.push(n,a),a},argPackAdvance:8,readValueFromPointer:ke,destructorFunction:n}]}))}function qe(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function Ge(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Ye=e}var Ye=void 0;function Xe(e){for(var t="",r=e;V[r];)t+=Ye[V[r++]];return t}var Je=void 0;function Qe(e){throw new Je(e)}function Ze(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||Qe('type "'+n+'" must have a positive integer typeid pointer'),Ie.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;Qe("Cannot register type '"+n+"' twice")}if(Ie[e]=t,delete Fe[e],Re.hasOwnProperty(e)){var o=Re[e];delete Re[e],o.forEach((function(e){e()}))}}function Ke(e,t,r,n,o){var i=qe(r);Ze(e,{name:t=Xe(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:o},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=M;else if(2===r)n=H;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=z}return this.fromWireType(n[e>>i])},destructorFunction:null})}function et(e){if(!(this instanceof yt))return!1;if(!(e instanceof yt))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return t===n&&r===o}function tt(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function rt(e){Qe(e.$$.ptrType.registeredClass.name+" instance already deleted")}var nt=!1;function ot(e){}function it(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function at(e){e.count.value-=1,0===e.count.value&&it(e)}function st(e){return"undefined"==typeof FinalizationGroup?(st=function(e){return e},e):(nt=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?at(r):console.warn("object already deleted: "+r.ptr)}})),st=function(e){return nt.register(e,e.$$,e.$$),e},ot=function(e){nt.unregister(e.$$)},st(e))}function ut(){if(this.$$.ptr||rt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=st(Object.create(Object.getPrototypeOf(this),{$$:{value:tt(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function lt(){this.$$.ptr||rt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qe("Object already scheduled for deletion"),ot(this),at(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ct(){return!this.$$.ptr}var ft=void 0,pt=[];function dt(){for(;pt.length;){var e=pt.pop();e.$$.deleteScheduled=!1,e.delete()}}function ht(){return this.$$.ptr||rt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Qe("Object already scheduled for deletion"),pt.push(this),1===pt.length&&ft&&ft(dt),this.$$.deleteScheduled=!0,this}function mt(){yt.prototype.isAliasOf=et,yt.prototype.clone=ut,yt.prototype.delete=lt,yt.prototype.isDeleted=ct,yt.prototype.deleteLater=ht}function yt(){}var gt={};function vt(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Qe("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function bt(e,t,r){o.hasOwnProperty(e)?((void 0===r||void 0!==o[e].overloadTable&&void 0!==o[e].overloadTable[r])&&Qe("Cannot register public name '"+e+"' twice"),vt(o,e,e),o.hasOwnProperty(r)&&Qe("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),o[e].overloadTable[r]=t):(o[e]=t,void 0!==r&&(o[e].numArguments=r))}function wt(e,t,r,n,o,i,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function _t(e,t,r){for(;t!==r;)t.upcast||Qe("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Tt(e,t){if(null===t)return this.isReference&&Qe("null is not a valid "+this.name),0;t.$$||Qe('Cannot pass "'+ir(t)+'" as a '+this.name),t.$$.ptr||Qe("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return _t(t.$$.ptr,r,this.registeredClass)}function Pt(e,t){var r;if(null===t)return this.isReference&&Qe("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||Qe('Cannot pass "'+ir(t)+'" as a '+this.name),t.$$.ptr||Qe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&Qe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=_t(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&Qe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:Qe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var o=t.clone();r=this.rawShare(r,nr((function(){o.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:Qe("Unsupporting sharing policy")}return r}function Ct(e,t){if(null===t)return this.isReference&&Qe("null is not a valid "+this.name),0;t.$$||Qe('Cannot pass "'+ir(t)+'" as a '+this.name),t.$$.ptr||Qe("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&Qe("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return _t(t.$$.ptr,r,this.registeredClass)}function xt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Dt(e){this.rawDestructor&&this.rawDestructor(e)}function At(e){null!==e&&e.delete()}function St(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=St(e,t,r.baseClass);return null===n?null:r.downcast(n)}function $t(){return Object.keys(kt).length}function Et(){var e=[];for(var t in kt)kt.hasOwnProperty(t)&&e.push(kt[t]);return e}function Ot(e){ft=e,pt.length&&ft&&ft(dt)}function jt(){o.getInheritedInstanceCount=$t,o.getLiveInheritedInstances=Et,o.flushPendingDeletes=dt,o.setDelayFunction=Ot}var kt={};function Rt(e,t){for(void 0===t&&Qe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function It(e,t){return t=Rt(e,t),kt[t]}function Ft(e,t){return t.ptrType&&t.ptr||He("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&He("Both smartPtrType and smartPtr must be specified"),t.count={value:1},st(Object.create(e,{$$:{value:t}}))}function Lt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=It(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function o(){return this.isSmartPointer?Ft(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ft(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,a=this.registeredClass.getActualType(t),s=gt[a];if(!s)return o.call(this);i=this.isConst?s.constPointerType:s.pointerType;var u=St(t,this.registeredClass,i.registeredClass);return null===u?o.call(this):this.isSmartPointer?Ft(i.registeredClass.instancePrototype,{ptrType:i,ptr:u,smartPtrType:this,smartPtr:e}):Ft(i.registeredClass.instancePrototype,{ptrType:i,ptr:u})}function Ut(){Bt.prototype.getPointee=xt,Bt.prototype.destructor=Dt,Bt.prototype.argPackAdvance=8,Bt.prototype.readValueFromPointer=ke,Bt.prototype.deleteObject=At,Bt.prototype.fromWireType=Lt}function Bt(e,t,r,n,o,i,a,s,u,l,c){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=c,o||void 0!==t.baseClass?this.toWireType=Pt:n?(this.toWireType=Tt,this.destructorFunction=null):(this.toWireType=Ct,this.destructorFunction=null)}function Wt(e,t,r){o.hasOwnProperty(e)||He("Replacing nonexistant public symbol"),void 0!==o[e].overloadTable&&void 0!==r?o[e].overloadTable[r]=t:(o[e]=t,o[e].argCount=r)}function Mt(e,t){var r;if(e=Xe(e),void 0!==o["FUNCTION_TABLE_"+e])r=o["FUNCTION_TABLE_"+e][t];else if("undefined"!=typeof FUNCTION_TABLE)r=FUNCTION_TABLE[t];else{var n=o["dynCall_"+e];void 0===n&&void 0===(n=o["dynCall_"+e.replace(/f/g,"d")])&&Qe("No dynCall invoker for signature: "+e),r=function(r){for(var n=[],o=1;o<e.length;++o)n.push("a"+o);var i="return function dynCall_"+e+"_"+t+"("+n.join(", ")+") {\n";return i+="    return dynCall(rawFunction"+(n.length?", ":"")+n.join(", ")+");\n",i+="};\n",new Function("dynCall","rawFunction",i)(r,t)}(n)}return"function"!=typeof r&&Qe("unknown function pointer with signature "+e+": "+t),r}var Vt=void 0;function Ht(e){var t=on(e),r=Xe(t);return en(t),r}function Nt(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||Ie[t]||(Fe[t]?Fe[t].forEach(e):(r.push(t),n[t]=!0))})),new Vt(e+": "+r.map(Ht).join([", "]))}function zt(e,t,r,n,o,i,a,s,u,l,c,f,p){c=Xe(c),i=Mt(o,i),s&&(s=Mt(a,s)),l&&(l=Mt(u,l)),p=Mt(f,p);var d=Be(c);bt(d,(function(){Nt("Cannot construct "+c+" due to unbound types",[n])})),Ne([e,t,r],n?[n]:[],(function(t){var r,o;t=t[0],o=n?(r=t.registeredClass).instancePrototype:yt.prototype;var a=We(d,(function(){if(Object.getPrototypeOf(this)!==u)throw new Je("Use 'new' to construct "+c);if(void 0===f.constructor_body)throw new Je(c+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new Je("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(o,{constructor:{value:a}});a.prototype=u;var f=new wt(c,a,u,p,r,i,s,l),h=new Bt(c,f,!0,!1,!1),m=new Bt(c+"*",f,!1,!1,!1),y=new Bt(c+" const*",f,!1,!0,!1);return gt[e]={pointerType:m,constPointerType:y},Wt(d,a),[h,m,y]}))}function qt(e,t){for(var r=[],n=0;n<e;n++)r.push(z[(t>>2)+n]);return r}function Gt(e,t,r,n,o,i){$(t>0);var a=qt(t,r);o=Mt(n,o);var s=[i],u=[];Ne([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new Je("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Nt("Cannot construct "+e.name+" due to unbound types",a)},Ne([],a,(function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&Qe(r+" called with "+arguments.length+" arguments, expected "+(t-1)),u.length=0,s.length=t;for(var e=1;e<t;++e)s[e]=n[e].toWireType(u,arguments[e-1]);var i=o.apply(null,s);return je(u),n[0].fromWireType(i)},[]})),[]}))}function Yt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=We(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,o=e.apply(n,t);return o instanceof Object?o:n}function Xt(e,t,r,n,o){var i=t.length;i<2&&Qe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var l="void"!==t[0].name,c="",f="";for(u=0;u<i-2;++u)c+=(0!==u?", ":"")+"arg"+u,f+=(0!==u?", ":"")+"arg"+u+"Wired";var p="return function "+Be(e)+"("+c+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";s&&(p+="var destructors = [];\n");var d=s?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[Qe,n,o,je,t[0],t[1]];for(a&&(p+="var thisWired = classParam.toWireType("+d+", this);\n"),u=0;u<i-2;++u)p+="var arg"+u+"Wired = argType"+u+".toWireType("+d+", arg"+u+"); // "+t[u+2].name+"\n",h.push("argType"+u),m.push(t[u+2]);if(a&&(f="thisWired"+(f.length>0?", ":"")+f),p+=(l?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",s)p+="runDestructors(destructors);\n";else for(u=a?1:2;u<t.length;++u){var y=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(p+=y+"_dtor("+y+"); // "+t[u].name+"\n",h.push(y+"_dtor"),m.push(t[u].destructorFunction))}return l&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",h.push(p),Yt(Function,h).apply(null,m)}function Jt(e,t,r,n,o,i,a,s){var u=qt(r,n);t=Xe(t),i=Mt(o,i),Ne([],[e],(function(e){var n=(e=e[0]).name+"."+t;function o(){Nt("Cannot call "+n+" due to unbound types",u)}s&&e.registeredClass.pureVirtualFunctions.push(t);var l=e.registeredClass.instancePrototype,c=l[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===r-2?(o.argCount=r-2,o.className=e.name,l[t]=o):(vt(l,t,n),l[t].overloadTable[r-2]=o),Ne([],u,(function(o){var s=Xt(n,o,e,i,a);return void 0===l[t].overloadTable?(s.argCount=r-2,l[t]=s):l[t].overloadTable[r-2]=s,[]})),[]}))}var Qt=[],Zt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Kt(e){e>4&&0==--Zt[e].refcount&&(Zt[e]=void 0,Qt.push(e))}function er(){for(var e=0,t=5;t<Zt.length;++t)void 0!==Zt[t]&&++e;return e}function tr(){for(var e=5;e<Zt.length;++e)if(void 0!==Zt[e])return Zt[e];return null}function rr(){o.count_emval_handles=er,o.get_first_emval=tr}function nr(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Qt.length?Qt.pop():Zt.length;return Zt[t]={refcount:1,value:e},t}}function or(e,t){Ze(e,{name:t=Xe(t),fromWireType:function(e){var t=Zt[e].value;return Kt(e),t},toWireType:function(e,t){return nr(t)},argPackAdvance:8,readValueFromPointer:ke,destructorFunction:null})}function ir(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function ar(e,t){switch(t){case 2:return function(e){return this.fromWireType(G[e>>2])};case 3:return function(e){return this.fromWireType(Y[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function sr(e,t,r){var n=qe(r);Ze(e,{name:t=Xe(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+ir(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:ar(t,n),destructorFunction:null})}function ur(e,t,r){switch(t){case 0:return r?function(e){return M[e]}:function(e){return V[e]};case 1:return r?function(e){return H[e>>1]}:function(e){return N[e>>1]};case 2:return r?function(e){return z[e>>2]}:function(e){return q[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function lr(e,t,r,n,o){t=Xe(t),-1===o&&(o=4294967295);var i=qe(r),a=function(e){return e};if(0===n){var s=32-8*r;a=function(e){return e<<s>>>s}}var u=-1!=t.indexOf("unsigned");Ze(e,{name:t,fromWireType:a,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+ir(r)+'" to '+this.name);if(r<n||r>o)throw new TypeError('Passing a number "'+ir(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+o+"]!");return u?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:ur(t,i,0!==n),destructorFunction:null})}function cr(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=q,r=t[e>>=2],o=t[e+1];return new n(t.buffer,o,r)}Ze(e,{name:r=Xe(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function fr(e,t){var r="std::string"===(t=Xe(t));Ze(e,{name:t,fromWireType:function(e){var t,n=q[e>>2];if(r){var o=V[e+4+n],i=0;0!=o&&(i=o,V[e+4+n]=0);for(var a=e+4,s=0;s<=n;++s){var u=e+4+s;if(0==V[u]){var l=R(a);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),a=u+1}}0!=i&&(V[e+4+n]=i)}else{var c=new Array(n);for(s=0;s<n;++s)c[s]=String.fromCharCode(V[e+4+s]);t=c.join("")}return en(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||Qe("Cannot pass non-string to std::string");var o=(r&&n?function(){return L(t)}:function(){return t.length})(),i=Kr(4+o+1);if(q[i>>2]=o,r&&n)F(t,i+4,o+1);else if(n)for(var a=0;a<o;++a){var s=t.charCodeAt(a);s>255&&(en(i),Qe("String has UTF-16 code units that do not fit in 8 bits")),V[i+4+a]=s}else for(a=0;a<o;++a)V[i+4+a]=t[a];return null!==e&&e.push(en,i),i},argPackAdvance:8,readValueFromPointer:ke,destructorFunction:function(e){en(e)}})}function pr(e,t,r){var n,o;r=Xe(r),2===t?(n=function(){return N},o=1):4===t&&(n=function(){return q},o=2),Ze(e,{name:r,fromWireType:function(e){for(var t=n(),r=q[e>>2],i=new Array(r),a=e+4>>o,s=0;s<r;++s)i[s]=String.fromCharCode(t[a+s]);return en(e),i.join("")},toWireType:function(e,r){var i=r.length,a=Kr(4+i*t),s=n();q[a>>2]=i;for(var u=a+4>>o,l=0;l<i;++l)s[u+l]=r.charCodeAt(l);return null!==e&&e.push(en,a),a},argPackAdvance:8,readValueFromPointer:ke,destructorFunction:function(e){en(e)}})}function dr(e,t,r,n,o,i){Oe[e]={name:Xe(t),rawConstructor:Mt(r,n),rawDestructor:Mt(o,i),fields:[]}}function hr(e,t,r,n,o,i,a,s,u,l){Oe[e].fields.push({fieldName:Xe(t),getterReturnType:r,getter:Mt(n,o),getterContext:i,setterArgumentType:a,setter:Mt(s,u),setterContext:l})}function mr(e,t){Ze(e,{isVoid:!0,name:t=Xe(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}var yr={};function gr(e){var t=yr[e];return void 0===t?Xe(e):t}function vr(){return"object"==typeof globalThis?globalThis:Function("return this")()}function br(e){return 0===e?nr(vr()):(e=gr(e),nr(vr()[e]))}function wr(e){e>4&&(Zt[e].refcount+=1)}function _r(e,t){var r=Ie[e];return void 0===r&&Qe(t+" has unknown type "+Ht(e)),r}function Tr(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var n="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n";for(r=0;r<e;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >> 2) + "+r+'], "parameter '+r+'");\nvar arg'+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\n";return n+="var obj = new constructor("+t+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",n)(_r,o,nr)}var Pr={};function Cr(e){return e||Qe("Cannot use deleted val. handle = "+e),Zt[e].value}function xr(e,t,r,n){e=Cr(e);var o=Pr[t];return o||(o=Tr(t),Pr[t]=o),o(e,r,n)}function Dr(e,t){return nr((e=_r(e,"_emval_take_value")).readValueFromPointer(t))}function Ar(){be()}function Sr(){return M.length}function $r(){return 15728}var Er=0;function Or(e,t,r,n){t|=0,r|=0,n|=0;var o=0;for(Er=Er+1|0,z[(e|=0)>>2]=Er;(0|o)<(0|n);){if(0==(0|z[r+(o<<3)>>2]))return z[r+(o<<3)>>2]=Er,z[r+(4+(o<<3))>>2]=t,z[r+(8+(o<<3))>>2]=0,x(0|n),0|r;o=o+1|0}return r=0|Or(0|e,0|t,0|(r=0|tn(0|r,8*(1+(n=2*n|0)|0)|0)),0|n),x(0|n),0|r}function jr(e,t,r){e|=0,t|=0,r|=0;for(var n=0,o=0;(0|n)<(0|r)&&0!=(0|(o=0|z[t+(n<<3)>>2]));){if((0|o)==(0|e))return 0|z[t+(4+(n<<3))>>2];n=n+1|0}return 0}function kr(e,t){throw rn(e,t||1),"longjmp"}function Rr(e,t){kr(e,t)}function Ir(e,t,r){V.set(V.subarray(t,t+r),e)}function Fr(e){try{return P.grow(e-W.byteLength+65535>>16),Q(P.buffer),1}catch(e){}}function Lr(e){var t=Sr(),r=65536,n=2147418112;if(e>n)return!1;for(var o=Math.max(t,16777216);o<e;)o=o<=536870912?J(2*o,r):Math.min(J((3*o+2147483648)/4,r),n);return!!Fr(o)}var Ur={};function Br(){if(!Br.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s};for(var t in Ur)e[t]=Ur[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Br.strings=r}return Br.strings}function Wr(e,t){var r=Br(),n=0;return r.forEach((function(r,o){var i=t+n;z[e+4*o>>2]=i,B(r,i),n+=r.length+1})),0}function Mr(e,t){var r=Br();z[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),z[t>>2]=n,0}function Vr(e){_n(e)}var Hr={buffers:[null,[],[]],printChar:function(e,t){var r=Hr.buffers[e];0===t||10===t?((1===e?b:w)(k(r,0)),r.length=0):r.push(t)},varargs:0,get:function(e){return Hr.varargs+=4,z[Hr.varargs-4>>2]},getStr:function(){return R(Hr.get())},get64:function(){var e=Hr.get();return Hr.get(),e},getZero:function(){Hr.get()}};function Nr(e){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||be(e),e.errno}}function zr(e,t,r,n,o){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||be(e),e.errno}}function qr(e,t,r,n){try{for(var o=0,i=0;i<r;i++){for(var a=z[t+8*i>>2],s=z[t+(8*i+4)>>2],u=0;u<s;u++)Hr.printChar(e,V[a+u]);o+=s}return z[n>>2]=o,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||be(e),e.errno}}function Gr(){return 0|D()}function Yr(e){x(0|e)}Ve=o.InternalError=Me(Error,"InternalError"),Ge(),Je=o.BindingError=Me(Error,"BindingError"),mt(),Ut(),jt(),Vt=o.UnboundTypeError=Me(Error,"UnboundTypeError"),rr();var Xr={__cxa_allocate_exception:De,__cxa_thread_atexit:Se,__cxa_throw:Ee,_embind_finalize_value_object:ze,_embind_register_bool:Ke,_embind_register_class:zt,_embind_register_class_constructor:Gt,_embind_register_class_function:Jt,_embind_register_emval:or,_embind_register_float:sr,_embind_register_integer:lr,_embind_register_memory_view:cr,_embind_register_std_string:fr,_embind_register_std_wstring:pr,_embind_register_value_object:dr,_embind_register_value_object_field:hr,_embind_register_void:mr,_emval_decref:Kt,_emval_get_global:br,_emval_incref:wr,_emval_new:xr,_emval_take_value:Dr,abort:Ar,emscripten_get_sbrk_ptr:$r,emscripten_longjmp:Rr,emscripten_memcpy_big:Ir,emscripten_resize_heap:Lr,environ_get:Wr,environ_sizes_get:Mr,exit:Vr,fd_close:Nr,fd_seek:zr,fd_write:qr,getTempRet0:Gr,invoke_ii:mn,invoke_iii:gn,invoke_iiii:vn,invoke_vi:hn,invoke_viii:yn,memory:P,saveSetjmp:Or,setTempRet0:Yr,table:A,testSetjmp:jr},Jr=xe();o.asm=Jr;var Qr,Zr=o.___wasm_call_ctors=function(){return o.asm.__wasm_call_ctors.apply(null,arguments)},Kr=o._malloc=function(){return o.asm.malloc.apply(null,arguments)},en=o._free=function(){return o.asm.free.apply(null,arguments)},tn=o._realloc=function(){return o.asm.realloc.apply(null,arguments)},rn=o._setThrew=function(){return o.asm.setThrew.apply(null,arguments)},nn=o.__ZSt18uncaught_exceptionv=function(){return o.asm._ZSt18uncaught_exceptionv.apply(null,arguments)},on=o.___getTypeName=function(){return o.asm.__getTypeName.apply(null,arguments)},an=(o.___embind_register_native_and_builtin_types=function(){return o.asm.__embind_register_native_and_builtin_types.apply(null,arguments)},o.dynCall_vi=function(){return o.asm.dynCall_vi.apply(null,arguments)}),sn=o.dynCall_viii=function(){return o.asm.dynCall_viii.apply(null,arguments)},un=o.dynCall_ii=function(){return o.asm.dynCall_ii.apply(null,arguments)},ln=o.dynCall_iii=function(){return o.asm.dynCall_iii.apply(null,arguments)},cn=o.dynCall_iiii=function(){return o.asm.dynCall_iiii.apply(null,arguments)},fn=o.stackSave=function(){return o.asm.stackSave.apply(null,arguments)},pn=o.stackAlloc=function(){return o.asm.stackAlloc.apply(null,arguments)},dn=o.stackRestore=function(){return o.asm.stackRestore.apply(null,arguments)};function hn(e,t){var r=fn();try{an(e,t)}catch(e){if(dn(r),e!==e+0&&"longjmp"!==e)throw e;rn(1,0)}}function mn(e,t){var r=fn();try{return un(e,t)}catch(e){if(dn(r),e!==e+0&&"longjmp"!==e)throw e;rn(1,0)}}function yn(e,t,r,n){var o=fn();try{sn(e,t,r,n)}catch(e){if(dn(o),e!==e+0&&"longjmp"!==e)throw e;rn(1,0)}}function gn(e,t,r){var n=fn();try{return ln(e,t,r)}catch(e){if(dn(n),e!==e+0&&"longjmp"!==e)throw e;rn(1,0)}}function vn(e,t,r,n){var o=fn();try{return cn(e,t,r,n)}catch(e){if(dn(o),e!==e+0&&"longjmp"!==e)throw e;rn(1,0)}}function bn(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function wn(e){function t(){Qr||(Qr=!0,S||(ue(),le(),o.onRuntimeInitialized&&o.onRuntimeInitialized(),fe()))}e=e||a,he>0||(se(),he>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}function _n(e,t){t&&T&&0===e||(T||(S=!0,ce(),o.onExit&&o.onExit(e)),u(e,new bn(e)))}if(o.__growWasmMemory=function(){return o.asm.__growWasmMemory.apply(null,arguments)},o.dynCall_i=function(){return o.asm.dynCall_i.apply(null,arguments)},o.dynCall_vii=function(){return o.asm.dynCall_vii.apply(null,arguments)},o.dynCall_iiiiii=function(){return o.asm.dynCall_iiiiii.apply(null,arguments)},o.dynCall_iiiiiii=function(){return o.asm.dynCall_iiiiiii.apply(null,arguments)},o.dynCall_iiiii=function(){return o.asm.dynCall_iiiii.apply(null,arguments)},o.dynCall_viiii=function(){return o.asm.dynCall_viiii.apply(null,arguments)},o.dynCall_viiiiiii=function(){return o.asm.dynCall_viiiiiii.apply(null,arguments)},o.dynCall_viiiii=function(){return o.asm.dynCall_viiiii.apply(null,arguments)},o.dynCall_jiji=function(){return o.asm.dynCall_jiji.apply(null,arguments)},o.dynCall_viiiiii=function(){return o.asm.dynCall_viiiiii.apply(null,arguments)},o.asm=Jr,o.ccall=O,o.then=function(e){if(Qr)e(o);else{var t=o.onRuntimeInitialized;o.onRuntimeInitialized=function(){t&&t(),e(o)}}return o},ye=function e(){Qr||wn(),Qr||(ye=e)},o.run=wn,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return T=!0,wn(),e});e.exports=o},4044:(e,t,r)=>{var n,o=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,o=void 0!==(e=e||{})?e:{},i={};for(t in o)o.hasOwnProperty(t)&&(i[t]=o[t]);var a=[],s="./this.program",u=!1,l=!1,c=!1,f=!1;u="object"==typeof window,l="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&!u&&!l,f=!u&&!c&&!l;var p,d,h,m,y="";function g(e){return o.locateFile?o.locateFile(e,y):y+e}c?(y="//",p=function(e,t){return h||(h=r(9652)),m||(m=r(6087)),e=m.normalize(e),h.readFileSync(e,t?null:"utf8")},d=function(e){var t=p(e,!0);return t.buffer||(t=new Uint8Array(t)),x(t.buffer),t},process.argv.length>1&&(s=process.argv[1].replace(/\\/g,"/")),a=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof Kr))throw e})),process.on("unhandledRejection",me),o.inspect=function(){return"[Emscripten Module object]"}):f?("undefined"!=typeof read&&(p=function(e){return read(e)}),d=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(x("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?a=scriptArgs:void 0!==arguments&&(a=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(u||l)&&(l?y=self.location.href:document.currentScript&&(y=document.currentScript.src),n&&(y=n),y=0!==y.indexOf("blob:")?y.substr(0,y.lastIndexOf("/")+1):"",p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}));var v=o.print||console.log.bind(console),b=o.printErr||console.warn.bind(console);for(t in i)i.hasOwnProperty(t)&&(o[t]=i[t]);i=null,o.arguments&&(a=o.arguments),o.thisProgram&&(s=o.thisProgram),o.quit&&o.quit;var w,_,T=function(e){};o.wasmBinary&&(w=o.wasmBinary),o.noExitRuntime&&o.noExitRuntime,"object"!=typeof WebAssembly&&b("no native wasm support detected");var P=new WebAssembly.Table({initial:178,maximum:178,element:"anyfunc"}),C=!1;function x(e,t){e||me("Assertion failed: "+t)}function D(e){var t=o["_"+e];return x(t,"Cannot call unknown function "+e+", make sure it is exported"),t}function A(e,t,r,n,o){var i={string:function(e){var t=0;if(null!=e&&0!==e){var r=1+(e.length<<2);j(e,t=Qr(r),r)}return t},array:function(e){var t=Qr(e.length);return R(e,t),t}},a=D(e),s=[],u=0;if(n)for(var l=0;l<n.length;l++){var c=i[r[l]];c?(0===u&&(u=Jr()),s[l]=c(n[l])):s[l]=n[l]}var f=a.apply(null,s);return f=function(e){return"string"===t?E(e):"boolean"===t?Boolean(e):e}(f),0!==u&&Zr(u),f}var S="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function $(e,t,r){for(var n=t+r,o=t;e[o]&&!(o>=n);)++o;if(o-t>16&&e.subarray&&S)return S.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var l=a-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function E(e,t){return e?$(U,e,t):""}function O(e,t,r,n){if(!(n>0))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function j(e,t,r){return O(e,U,t,r)}function k(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++r)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}function R(e,t){L.set(e,t)}function I(e,t,r){for(var n=0;n<e.length;++n)L[t++>>0]=e.charCodeAt(n);r||(L[t>>0]=0)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var F,L,U,B,W,M,V,H,N,z=16384,q=65536;function G(e,t){return e%t>0&&(e+=t-e%t),e}function Y(e){F=e,o.HEAP8=L=new Int8Array(e),o.HEAP16=B=new Int16Array(e),o.HEAP32=M=new Int32Array(e),o.HEAPU8=U=new Uint8Array(e),o.HEAPU16=W=new Uint16Array(e),o.HEAPU32=V=new Uint32Array(e),o.HEAPF32=H=new Float32Array(e),o.HEAPF64=N=new Float64Array(e)}var X=5267360,J=24320,Q=o.TOTAL_MEMORY||1073741824;function Z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var r=t.func;"number"==typeof r?void 0===t.arg?o.dynCall_v(r):o.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}else t()}}(_=o.wasmMemory?o.wasmMemory:new WebAssembly.Memory({initial:Q/q}))&&(F=_.buffer),Q=F.byteLength,Y(F),M[J>>2]=X;var K=[],ee=[],te=[],re=[],ne=[];function oe(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)ue(o.preRun.shift());Z(K)}function ie(){Z(ee)}function ae(){Z(te)}function se(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)le(o.postRun.shift());Z(ne)}function ue(e){K.unshift(e)}function le(e){ne.unshift(e)}Math.abs,Math.ceil,Math.floor,Math.min;var ce=0,fe=null,pe=null;function de(e){ce++,o.monitorRunDependencies&&o.monitorRunDependencies(ce)}function he(e){if(ce--,o.monitorRunDependencies&&o.monitorRunDependencies(ce),0==ce&&(null!==fe&&(clearInterval(fe),fe=null),pe)){var t=pe;pe=null,t()}}function me(e){throw o.onAbort&&o.onAbort(e),v(e+=""),b(e),C=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}o.preloadedImages={},o.preloadedAudios={};var ye="data:application/octet-stream;base64,";function ge(e){return String.prototype.startsWith?e.startsWith(ye):0===e.indexOf(ye)}var ve="openjpegwasm_decode.wasm";function be(){try{if(w)return new Uint8Array(w);if(d)return d(ve);throw"both async and sync fetching of the wasm failed"}catch(e){me(e)}}function we(){return w||!u&&!l||"function"!=typeof fetch?new Promise((function(e,t){e(be())})):fetch(ve,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ve+"'";return e.arrayBuffer()})).catch((function(){return be()}))}function _e(){var e={env:Hr,wasi_snapshot_preview1:Hr};function t(e,t){var r=e.exports;o.asm=r,he()}function r(e){t(e.instance)}function n(t){return we().then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){b("failed to asynchronously prepare wasm: "+e),me(e)}))}if(de(),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(e){return b("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(w||"function"!=typeof WebAssembly.instantiateStreaming||ge(ve)||"function"!=typeof fetch)return n(r);fetch(ve,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),n(r)}))}))}(),{}}function Te(e,t){re.unshift({func:e,arg:t})}function Pe(){return Te.apply(null,arguments)}ge(ve)||(ve=g(ve)),ee.push({func:function(){qr()}});var Ce={};function xe(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function De(e){return this.fromWireType(V[e>>2])}var Ae={},Se={},$e={},Ee=48,Oe=57;function je(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=Ee&&t<=Oe?"_"+e:e}function ke(e,t){return e=je(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Re(e,t){var r=ke(t,(function(e){this.name=t,this.message=e;var r=new Error(e).stack;void 0!==r&&(this.stack=this.toString()+"\n"+r.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var Ie=void 0;function Fe(e){throw new Ie(e)}function Le(e,t,r){function n(t){var n=r(t);n.length!==e.length&&Fe("Mismatched type converter count");for(var o=0;o<e.length;++o)ze(e[o],n[o])}e.forEach((function(e){$e[e]=t}));var o=new Array(t.length),i=[],a=0;t.forEach((function(e,t){Se.hasOwnProperty(e)?o[t]=Se[e]:(i.push(e),Ae.hasOwnProperty(e)||(Ae[e]=[]),Ae[e].push((function(){o[t]=Se[e],++a===i.length&&n(o)})))})),0===i.length&&n(o)}function Ue(e){var t=Ce[e];delete Ce[e];var r=t.rawConstructor,n=t.rawDestructor,o=t.fields;Le([e],o.map((function(e){return e.getterReturnType})).concat(o.map((function(e){return e.setterArgumentType}))),(function(e){var i={};return o.forEach((function(t,r){var n=t.fieldName,a=e[r],s=t.getter,u=t.getterContext,l=e[r+o.length],c=t.setter,f=t.setterContext;i[n]={read:function(e){return a.fromWireType(s(u,e))},write:function(e,t){var r=[];c(f,e,l.toWireType(r,t)),xe(r)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var r in i)t[r]=i[r].read(e);return n(e),t},toWireType:function(e,t){for(var o in i)if(!(o in t))throw new TypeError("Missing field");var a=r();for(o in i)i[o].write(a,t[o]);return null!==e&&e.push(n,a),a},argPackAdvance:8,readValueFromPointer:De,destructorFunction:n}]}))}function Be(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function We(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);Me=e}var Me=void 0;function Ve(e){for(var t="",r=e;U[r];)t+=Me[U[r++]];return t}var He=void 0;function Ne(e){throw new He(e)}function ze(e,t,r){if(r=r||{},!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||Ne('type "'+n+'" must have a positive integer typeid pointer'),Se.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;Ne("Cannot register type '"+n+"' twice")}if(Se[e]=t,delete $e[e],Ae.hasOwnProperty(e)){var o=Ae[e];delete Ae[e],o.forEach((function(e){e()}))}}function qe(e,t,r,n,o){var i=Be(r);ze(e,{name:t=Ve(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?n:o},argPackAdvance:8,readValueFromPointer:function(e){var n;if(1===r)n=L;else if(2===r)n=B;else{if(4!==r)throw new TypeError("Unknown boolean type size: "+t);n=M}return this.fromWireType(n[e>>i])},destructorFunction:null})}function Ge(e){if(!(this instanceof lt))return!1;if(!(e instanceof lt))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return t===n&&r===o}function Ye(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Xe(e){Ne(e.$$.ptrType.registeredClass.name+" instance already deleted")}var Je=!1;function Qe(e){}function Ze(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function Ke(e){e.count.value-=1,0===e.count.value&&Ze(e)}function et(e){return"undefined"==typeof FinalizationGroup?(et=function(e){return e},e):(Je=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var r=t.value;r.ptr?Ke(r):console.warn("object already deleted: "+r.ptr)}})),et=function(e){return Je.register(e,e.$$,e.$$),e},Qe=function(e){Je.unregister(e.$$)},et(e))}function tt(){if(this.$$.ptr||Xe(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=et(Object.create(Object.getPrototypeOf(this),{$$:{value:Ye(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function rt(){this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ne("Object already scheduled for deletion"),Qe(this),Ke(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function nt(){return!this.$$.ptr}var ot=void 0,it=[];function at(){for(;it.length;){var e=it.pop();e.$$.deleteScheduled=!1,e.delete()}}function st(){return this.$$.ptr||Xe(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Ne("Object already scheduled for deletion"),it.push(this),1===it.length&&ot&&ot(at),this.$$.deleteScheduled=!0,this}function ut(){lt.prototype.isAliasOf=Ge,lt.prototype.clone=tt,lt.prototype.delete=rt,lt.prototype.isDeleted=nt,lt.prototype.deleteLater=st}function lt(){}var ct={};function ft(e,t,r){if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||Ne("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}}function pt(e,t,r){o.hasOwnProperty(e)?((void 0===r||void 0!==o[e].overloadTable&&void 0!==o[e].overloadTable[r])&&Ne("Cannot register public name '"+e+"' twice"),ft(o,e,e),o.hasOwnProperty(r)&&Ne("Cannot register multiple overloads of a function with the same number of arguments ("+r+")!"),o[e].overloadTable[r]=t):(o[e]=t,void 0!==r&&(o[e].numArguments=r))}function dt(e,t,r,n,o,i,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function ht(e,t,r){for(;t!==r;)t.upcast||Ne("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function mt(e,t){if(null===t)return this.isReference&&Ne("null is not a valid "+this.name),0;t.$$||Ne('Cannot pass "'+Zt(t)+'" as a '+this.name),t.$$.ptr||Ne("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return ht(t.$$.ptr,r,this.registeredClass)}function yt(e,t){var r;if(null===t)return this.isReference&&Ne("null is not a valid "+this.name),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;t.$$||Ne('Cannot pass "'+Zt(t)+'" as a '+this.name),t.$$.ptr||Ne("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&Ne("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;if(r=ht(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&Ne("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:Ne("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var o=t.clone();r=this.rawShare(r,Jt((function(){o.delete()}))),null!==e&&e.push(this.rawDestructor,r)}break;default:Ne("Unsupporting sharing policy")}return r}function gt(e,t){if(null===t)return this.isReference&&Ne("null is not a valid "+this.name),0;t.$$||Ne('Cannot pass "'+Zt(t)+'" as a '+this.name),t.$$.ptr||Ne("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&Ne("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return ht(t.$$.ptr,r,this.registeredClass)}function vt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function bt(e){this.rawDestructor&&this.rawDestructor(e)}function wt(e){null!==e&&e.delete()}function _t(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;var n=_t(e,t,r.baseClass);return null===n?null:r.downcast(n)}function Tt(){return Object.keys(Dt).length}function Pt(){var e=[];for(var t in Dt)Dt.hasOwnProperty(t)&&e.push(Dt[t]);return e}function Ct(e){ot=e,it.length&&ot&&ot(at)}function xt(){o.getInheritedInstanceCount=Tt,o.getLiveInheritedInstances=Pt,o.flushPendingDeletes=at,o.setDelayFunction=Ct}var Dt={};function At(e,t){for(void 0===t&&Ne("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function St(e,t){return t=At(e,t),Dt[t]}function $t(e,t){return t.ptrType&&t.ptr||Fe("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Fe("Both smartPtrType and smartPtr must be specified"),t.count={value:1},et(Object.create(e,{$$:{value:t}}))}function Et(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=St(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function o(){return this.isSmartPointer?$t(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):$t(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var i,a=this.registeredClass.getActualType(t),s=ct[a];if(!s)return o.call(this);i=this.isConst?s.constPointerType:s.pointerType;var u=_t(t,this.registeredClass,i.registeredClass);return null===u?o.call(this):this.isSmartPointer?$t(i.registeredClass.instancePrototype,{ptrType:i,ptr:u,smartPtrType:this,smartPtr:e}):$t(i.registeredClass.instancePrototype,{ptrType:i,ptr:u})}function Ot(){jt.prototype.getPointee=vt,jt.prototype.destructor=bt,jt.prototype.argPackAdvance=8,jt.prototype.readValueFromPointer=De,jt.prototype.deleteObject=wt,jt.prototype.fromWireType=Et}function jt(e,t,r,n,o,i,a,s,u,l,c){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=c,o||void 0!==t.baseClass?this.toWireType=yt:n?(this.toWireType=mt,this.destructorFunction=null):(this.toWireType=gt,this.destructorFunction=null)}function kt(e,t,r){o.hasOwnProperty(e)||Fe("Replacing nonexistant public symbol"),void 0!==o[e].overloadTable&&void 0!==r?o[e].overloadTable[r]=t:(o[e]=t,o[e].argCount=r)}function Rt(e,t){var r;if(e=Ve(e),void 0!==o["FUNCTION_TABLE_"+e])r=o["FUNCTION_TABLE_"+e][t];else if("undefined"!=typeof FUNCTION_TABLE)r=FUNCTION_TABLE[t];else{var n=o["dynCall_"+e];void 0===n&&void 0===(n=o["dynCall_"+e.replace(/f/g,"d")])&&Ne("No dynCall invoker for signature: "+e),r=function(r){for(var n=[],o=1;o<e.length;++o)n.push("a"+o);var i="return function dynCall_"+e+"_"+t+"("+n.join(", ")+") {\n";return i+="    return dynCall(rawFunction"+(n.length?", ":"")+n.join(", ")+");\n",i+="};\n",new Function("dynCall","rawFunction",i)(r,t)}(n)}return"function"!=typeof r&&Ne("unknown function pointer with signature "+e+": "+t),r}var It=void 0;function Ft(e){var t=Xr(e),r=Ve(t);return Yr(t),r}function Lt(e,t){var r=[],n={};throw t.forEach((function e(t){n[t]||Se[t]||($e[t]?$e[t].forEach(e):(r.push(t),n[t]=!0))})),new It(e+": "+r.map(Ft).join([", "]))}function Ut(e,t,r,n,o,i,a,s,u,l,c,f,p){c=Ve(c),i=Rt(o,i),s&&(s=Rt(a,s)),l&&(l=Rt(u,l)),p=Rt(f,p);var d=je(c);pt(d,(function(){Lt("Cannot construct "+c+" due to unbound types",[n])})),Le([e,t,r],n?[n]:[],(function(t){var r,o;t=t[0],o=n?(r=t.registeredClass).instancePrototype:lt.prototype;var a=ke(d,(function(){if(Object.getPrototypeOf(this)!==u)throw new He("Use 'new' to construct "+c);if(void 0===f.constructor_body)throw new He(c+" has no accessible constructor");var e=f.constructor_body[arguments.length];if(void 0===e)throw new He("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),u=Object.create(o,{constructor:{value:a}});a.prototype=u;var f=new dt(c,a,u,p,r,i,s,l),h=new jt(c,f,!0,!1,!1),m=new jt(c+"*",f,!1,!1,!1),y=new jt(c+" const*",f,!1,!0,!1);return ct[e]={pointerType:m,constPointerType:y},kt(d,a),[h,m,y]}))}function Bt(e,t){for(var r=[],n=0;n<e;n++)r.push(M[(t>>2)+n]);return r}function Wt(e,t,r,n,o,i){x(t>0);var a=Bt(t,r);o=Rt(n,o);var s=[i],u=[];Le([],[e],(function(e){var r="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new He("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Lt("Cannot construct "+e.name+" due to unbound types",a)},Le([],a,(function(n){return e.registeredClass.constructor_body[t-1]=function(){arguments.length!==t-1&&Ne(r+" called with "+arguments.length+" arguments, expected "+(t-1)),u.length=0,s.length=t;for(var e=1;e<t;++e)s[e]=n[e].toWireType(u,arguments[e-1]);var i=o.apply(null,s);return xe(u),n[0].fromWireType(i)},[]})),[]}))}function Mt(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=ke(e.name||"unknownFunctionName",(function(){}));r.prototype=e.prototype;var n=new r,o=e.apply(n,t);return o instanceof Object?o:n}function Vt(e,t,r,n,o){var i=t.length;i<2&&Ne("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==t[1]&&null!==r,s=!1,u=1;u<t.length;++u)if(null!==t[u]&&void 0===t[u].destructorFunction){s=!0;break}var l="void"!==t[0].name,c="",f="";for(u=0;u<i-2;++u)c+=(0!==u?", ":"")+"arg"+u,f+=(0!==u?", ":"")+"arg"+u+"Wired";var p="return function "+je(e)+"("+c+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n";s&&(p+="var destructors = [];\n");var d=s?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],m=[Ne,n,o,xe,t[0],t[1]];for(a&&(p+="var thisWired = classParam.toWireType("+d+", this);\n"),u=0;u<i-2;++u)p+="var arg"+u+"Wired = argType"+u+".toWireType("+d+", arg"+u+"); // "+t[u+2].name+"\n",h.push("argType"+u),m.push(t[u+2]);if(a&&(f="thisWired"+(f.length>0?", ":"")+f),p+=(l?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",s)p+="runDestructors(destructors);\n";else for(u=a?1:2;u<t.length;++u){var y=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==t[u].destructorFunction&&(p+=y+"_dtor("+y+"); // "+t[u].name+"\n",h.push(y+"_dtor"),m.push(t[u].destructorFunction))}return l&&(p+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p+="}\n",h.push(p),Mt(Function,h).apply(null,m)}function Ht(e,t,r,n,o,i,a,s){var u=Bt(r,n);t=Ve(t),i=Rt(o,i),Le([],[e],(function(e){var n=(e=e[0]).name+"."+t;function o(){Lt("Cannot call "+n+" due to unbound types",u)}s&&e.registeredClass.pureVirtualFunctions.push(t);var l=e.registeredClass.instancePrototype,c=l[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===r-2?(o.argCount=r-2,o.className=e.name,l[t]=o):(ft(l,t,n),l[t].overloadTable[r-2]=o),Le([],u,(function(o){var s=Vt(n,o,e,i,a);return void 0===l[t].overloadTable?(s.argCount=r-2,l[t]=s):l[t].overloadTable[r-2]=s,[]})),[]}))}var Nt=[],zt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function qt(e){e>4&&0==--zt[e].refcount&&(zt[e]=void 0,Nt.push(e))}function Gt(){for(var e=0,t=5;t<zt.length;++t)void 0!==zt[t]&&++e;return e}function Yt(){for(var e=5;e<zt.length;++e)if(void 0!==zt[e])return zt[e];return null}function Xt(){o.count_emval_handles=Gt,o.get_first_emval=Yt}function Jt(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Nt.length?Nt.pop():zt.length;return zt[t]={refcount:1,value:e},t}}function Qt(e,t){ze(e,{name:t=Ve(t),fromWireType:function(e){var t=zt[e].value;return qt(e),t},toWireType:function(e,t){return Jt(t)},argPackAdvance:8,readValueFromPointer:De,destructorFunction:null})}function Zt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function Kt(e,t){switch(t){case 2:return function(e){return this.fromWireType(H[e>>2])};case 3:return function(e){return this.fromWireType(N[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function er(e,t,r){var n=Be(r);ze(e,{name:t=Ve(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Zt(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:Kt(t,n),destructorFunction:null})}function tr(e,t,r){switch(t){case 0:return r?function(e){return L[e]}:function(e){return U[e]};case 1:return r?function(e){return B[e>>1]}:function(e){return W[e>>1]};case 2:return r?function(e){return M[e>>2]}:function(e){return V[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function rr(e,t,r,n,o){t=Ve(t),-1===o&&(o=4294967295);var i=Be(r),a=function(e){return e};if(0===n){var s=32-8*r;a=function(e){return e<<s>>>s}}var u=-1!=t.indexOf("unsigned");ze(e,{name:t,fromWireType:a,toWireType:function(e,r){if("number"!=typeof r&&"boolean"!=typeof r)throw new TypeError('Cannot convert "'+Zt(r)+'" to '+this.name);if(r<n||r>o)throw new TypeError('Passing a number "'+Zt(r)+'" from JS side to C/C++ side to an argument of type "'+t+'", which is outside the valid range ['+n+", "+o+"]!");return u?r>>>0:0|r},argPackAdvance:8,readValueFromPointer:tr(t,i,0!==n),destructorFunction:null})}function nr(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=V,r=t[e>>=2],o=t[e+1];return new n(t.buffer,o,r)}ze(e,{name:r=Ve(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})}function or(e,t){var r="std::string"===(t=Ve(t));ze(e,{name:t,fromWireType:function(e){var t,n=V[e>>2];if(r){var o=U[e+4+n],i=0;0!=o&&(i=o,U[e+4+n]=0);for(var a=e+4,s=0;s<=n;++s){var u=e+4+s;if(0==U[u]){var l=E(a);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),a=u+1}}0!=i&&(U[e+4+n]=i)}else{var c=new Array(n);for(s=0;s<n;++s)c[s]=String.fromCharCode(U[e+4+s]);t=c.join("")}return Yr(e),t},toWireType:function(e,t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));var n="string"==typeof t;n||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||Ne("Cannot pass non-string to std::string");var o=(r&&n?function(){return k(t)}:function(){return t.length})(),i=Gr(4+o+1);if(V[i>>2]=o,r&&n)j(t,i+4,o+1);else if(n)for(var a=0;a<o;++a){var s=t.charCodeAt(a);s>255&&(Yr(i),Ne("String has UTF-16 code units that do not fit in 8 bits")),U[i+4+a]=s}else for(a=0;a<o;++a)U[i+4+a]=t[a];return null!==e&&e.push(Yr,i),i},argPackAdvance:8,readValueFromPointer:De,destructorFunction:function(e){Yr(e)}})}function ir(e,t,r){var n,o;r=Ve(r),2===t?(n=function(){return W},o=1):4===t&&(n=function(){return V},o=2),ze(e,{name:r,fromWireType:function(e){for(var t=n(),r=V[e>>2],i=new Array(r),a=e+4>>o,s=0;s<r;++s)i[s]=String.fromCharCode(t[a+s]);return Yr(e),i.join("")},toWireType:function(e,r){var i=r.length,a=Gr(4+i*t),s=n();V[a>>2]=i;for(var u=a+4>>o,l=0;l<i;++l)s[u+l]=r.charCodeAt(l);return null!==e&&e.push(Yr,a),a},argPackAdvance:8,readValueFromPointer:De,destructorFunction:function(e){Yr(e)}})}function ar(e,t,r,n,o,i){Ce[e]={name:Ve(t),rawConstructor:Rt(r,n),rawDestructor:Rt(o,i),fields:[]}}function sr(e,t,r,n,o,i,a,s,u,l){Ce[e].fields.push({fieldName:Ve(t),getterReturnType:r,getter:Rt(n,o),getterContext:i,setterArgumentType:a,setter:Rt(s,u),setterContext:l})}function ur(e,t){ze(e,{isVoid:!0,name:t=Ve(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})}var lr={};function cr(e){var t=lr[e];return void 0===t?Ve(e):t}function fr(){return"object"==typeof globalThis?globalThis:Function("return this")()}function pr(e){return 0===e?Jt(fr()):(e=cr(e),Jt(fr()[e]))}function dr(e){e>4&&(zt[e].refcount+=1)}function hr(e,t){var r=Se[e];return void 0===r&&Ne(t+" has unknown type "+Ft(e)),r}function mr(e){for(var t="",r=0;r<e;++r)t+=(0!==r?", ":"")+"arg"+r;var n="return function emval_allocator_"+e+"(constructor, argTypes, args) {\n";for(r=0;r<e;++r)n+="var argType"+r+" = requireRegisteredType(Module['HEAP32'][(argTypes >> 2) + "+r+'], "parameter '+r+'");\nvar arg'+r+" = argType"+r+".readValueFromPointer(args);\nargs += argType"+r+"['argPackAdvance'];\n";return n+="var obj = new constructor("+t+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",n)(hr,o,Jt)}var yr={};function gr(e){return e||Ne("Cannot use deleted val. handle = "+e),zt[e].value}function vr(e,t,r,n){e=gr(e);var o=yr[t];return o||(o=mr(t),yr[t]=o),o(e,r,n)}function br(e,t){return Jt((e=hr(e,"_emval_take_value")).readValueFromPointer(t))}function wr(){me()}function _r(){return L.length}function Tr(){return 24320}function Pr(e,t,r){U.set(U.subarray(t,t+r),e)}function Cr(e){try{return _.grow(e-F.byteLength+65535>>16),Y(_.buffer),1}catch(e){}}function xr(e){var t=_r(),r=65536,n=2147418112;if(e>n)return!1;for(var o=Math.max(t,16777216);o<e;)o=o<=536870912?G(2*o,r):Math.min(G((3*o+2147483648)/4,r),n);return!!Cr(o)}var Dr={};function Ar(){if(!Ar.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s};for(var t in Dr)e[t]=Dr[t];var r=[];for(var t in e)r.push(t+"="+e[t]);Ar.strings=r}return Ar.strings}function Sr(e,t){var r=Ar(),n=0;return r.forEach((function(r,o){var i=t+n;M[e+4*o>>2]=i,I(r,i),n+=r.length+1})),0}function $r(e,t){var r=Ar();M[e>>2]=r.length;var n=0;return r.forEach((function(e){n+=e.length+1})),M[t>>2]=n,0}var Er={buffers:[null,[],[]],printChar:function(e,t){var r=Er.buffers[e];0===t||10===t?((1===e?v:b)($(r,0)),r.length=0):r.push(t)},varargs:0,get:function(e){return Er.varargs+=4,M[Er.varargs-4>>2]},getStr:function(){return E(Er.get())},get64:function(){var e=Er.get();return Er.get(),e},getZero:function(){Er.get()}};function Or(e){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function jr(e,t,r,n,o){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function kr(e,t,r,n){try{for(var o=0,i=0;i<r;i++){for(var a=M[t+8*i>>2],s=M[t+(8*i+4)>>2],u=0;u<s;u++)Er.printChar(e,U[a+u]);o+=s}return M[n>>2]=o,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||me(e),e.errno}}function Rr(e){return 0}function Ir(){}function Fr(){return 0}function Lr(){return 0}function Ur(){return 6}function Br(){}function Wr(e){T(0|e)}function Mr(e){return o.___errno_location&&(M[o.___errno_location()>>2]=e),e}function Vr(e){switch(e){case 30:return z;case 85:return 2147418112/z;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return"object"==typeof navigator&&navigator.hardwareConcurrency||1}return Mr(28),-1}Ie=o.InternalError=Re(Error,"InternalError"),We(),He=o.BindingError=Re(Error,"BindingError"),ut(),Ot(),xt(),It=o.UnboundTypeError=Re(Error,"UnboundTypeError"),Xt();var Hr={__cxa_thread_atexit:Pe,_embind_finalize_value_object:Ue,_embind_register_bool:qe,_embind_register_class:Ut,_embind_register_class_constructor:Wt,_embind_register_class_function:Ht,_embind_register_emval:Qt,_embind_register_float:er,_embind_register_integer:rr,_embind_register_memory_view:nr,_embind_register_std_string:or,_embind_register_std_wstring:ir,_embind_register_value_object:ar,_embind_register_value_object_field:sr,_embind_register_void:ur,_emval_decref:qt,_emval_get_global:pr,_emval_incref:dr,_emval_new:vr,_emval_take_value:br,abort:wr,emscripten_get_sbrk_ptr:Tr,emscripten_memcpy_big:Pr,emscripten_resize_heap:xr,environ_get:Sr,environ_sizes_get:$r,fd_close:Or,fd_seek:jr,fd_write:kr,memory:_,pthread_attr_init:Rr,pthread_attr_setdetachstate:Ir,pthread_cond_destroy:Fr,pthread_cond_init:Lr,pthread_create:Ur,pthread_join:Br,setTempRet0:Wr,sysconf:Vr,table:P},Nr=_e();o.asm=Nr;var zr,qr=o.___wasm_call_ctors=function(){return o.asm.__wasm_call_ctors.apply(null,arguments)},Gr=o._malloc=function(){return o.asm.malloc.apply(null,arguments)},Yr=o._free=function(){return o.asm.free.apply(null,arguments)},Xr=(o._setThrew=function(){return o.asm.setThrew.apply(null,arguments)},o.__ZSt18uncaught_exceptionv=function(){return o.asm._ZSt18uncaught_exceptionv.apply(null,arguments)},o.___getTypeName=function(){return o.asm.__getTypeName.apply(null,arguments)}),Jr=(o.___embind_register_native_and_builtin_types=function(){return o.asm.__embind_register_native_and_builtin_types.apply(null,arguments)},o.stackSave=function(){return o.asm.stackSave.apply(null,arguments)}),Qr=o.stackAlloc=function(){return o.asm.stackAlloc.apply(null,arguments)},Zr=o.stackRestore=function(){return o.asm.stackRestore.apply(null,arguments)};function Kr(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function en(e){function t(){zr||(zr=!0,C||(ie(),ae(),o.onRuntimeInitialized&&o.onRuntimeInitialized(),se()))}e=e||a,ce>0||(oe(),ce>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}if(o.__growWasmMemory=function(){return o.asm.__growWasmMemory.apply(null,arguments)},o.dynCall_i=function(){return o.asm.dynCall_i.apply(null,arguments)},o.dynCall_vi=function(){return o.asm.dynCall_vi.apply(null,arguments)},o.dynCall_iii=function(){return o.asm.dynCall_iii.apply(null,arguments)},o.dynCall_viii=function(){return o.asm.dynCall_viii.apply(null,arguments)},o.dynCall_ii=function(){return o.asm.dynCall_ii.apply(null,arguments)},o.dynCall_iiii=function(){return o.asm.dynCall_iiii.apply(null,arguments)},o.dynCall_vii=function(){return o.asm.dynCall_vii.apply(null,arguments)},o.dynCall_viiii=function(){return o.asm.dynCall_viiii.apply(null,arguments)},o.dynCall_iji=function(){return o.asm.dynCall_iji.apply(null,arguments)},o.dynCall_jji=function(){return o.asm.dynCall_jji.apply(null,arguments)},o.dynCall_iiji=function(){return o.asm.dynCall_iiji.apply(null,arguments)},o.dynCall_jiji=function(){return o.asm.dynCall_jiji.apply(null,arguments)},o.dynCall_iiiii=function(){return o.asm.dynCall_iiiii.apply(null,arguments)},o.dynCall_iiiiii=function(){return o.asm.dynCall_iiiiii.apply(null,arguments)},o.dynCall_iiiiiiii=function(){return o.asm.dynCall_iiiiiiii.apply(null,arguments)},o.dynCall_iiiiiii=function(){return o.asm.dynCall_iiiiiii.apply(null,arguments)},o.dynCall_iiiiiiiiiiii=function(){return o.asm.dynCall_iiiiiiiiiiii.apply(null,arguments)},o.dynCall_iidiiii=function(){return o.asm.dynCall_iidiiii.apply(null,arguments)},o.dynCall_viiiiii=function(){return o.asm.dynCall_viiiiii.apply(null,arguments)},o.dynCall_viiiii=function(){return o.asm.dynCall_viiiii.apply(null,arguments)},o.asm=Nr,o.ccall=A,o.then=function(e){if(zr)e(o);else{var t=o.onRuntimeInitialized;o.onRuntimeInitialized=function(){t&&t(),e(o)}}return o},pe=function e(){zr||en(),zr||(pe=e)},o.run=en,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();return en(),e});e.exports=o},6453:(e,t,r)=>{var n=r(8531);e.exports=n},6854:(e,t,r)=>{r(6764);var n=r(9081).Object,o=e.exports=function(e,t,r){return n.defineProperty(e,t,r)};n.defineProperty.sham&&(o.sham=!0)},5723:(e,t,r)=>{e.exports=r(747)},747:(e,t,r)=>{var n=r(6453);e.exports=n},5222:(e,t,r)=>{var n=r(8307),o=r(7265),i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not a function")}},1912:(e,t,r)=>{var n=r(3359),o=String,i=TypeError;e.exports=function(e){if(n(e))return e;throw i(o(e)+" is not an object")}},1570:(e,t,r)=>{var n=r(6355),o=n({}.toString),i=n("".slice);e.exports=function(e){return i(o(e),8,-1)}},8518:(e,t,r)=>{var n=r(7001),o=r(7550),i=r(5595);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},5595:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6868:(e,t,r)=>{var n=r(2868),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},7001:(e,t,r)=>{var n=r(6530);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},231:(e,t,r)=>{var n=r(2868),o=r(3359),i=n.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},6900:(e,t,r)=>{var n=r(8104);e.exports=n("navigator","userAgent")||""},8233:(e,t,r)=>{var n,o,i=r(2868),a=r(6900),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},390:(e,t,r)=>{"use strict";var n=r(2868),o=r(6266),i=r(3880),a=r(8307),s=r(5904).f,u=r(1011),l=r(9081),c=r(7673),f=r(8518),p=r(5584),d=function(e){var t=function(r,n,i){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(r);case 2:return new e(r,n)}return new e(r,n,i)}return o(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var r,o,h,m,y,g,v,b,w=e.target,_=e.global,T=e.stat,P=e.proto,C=_?n:T?n[w]:(n[w]||{}).prototype,x=_?l:l[w]||f(l,w,{})[w],D=x.prototype;for(h in t)r=!u(_?h:w+(T?".":"#")+h,e.forced)&&C&&p(C,h),y=x[h],r&&(g=e.dontCallGetSet?(b=s(C,h))&&b.value:C[h]),m=r&&g?g:t[h],r&&typeof y==typeof m||(v=e.bind&&r?c(m,n):e.wrap&&r?d(m):P&&a(m)?i(m):m,(e.sham||m&&m.sham||y&&y.sham)&&f(v,"sham",!0),f(x,h,v),P&&(p(l,o=w+"Prototype")||f(l,o,{}),f(l[o],h,m),e.real&&D&&!D[h]&&f(D,h,m)))}},6530:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},6266:(e,t,r)=>{var n=r(9086),o=Function.prototype,i=o.apply,a=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?a.bind(i):function(){return a.apply(i,arguments)})},7673:(e,t,r)=>{var n=r(3880),o=r(5222),i=r(9086),a=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:i?a(e,t):function(){return e.apply(t,arguments)}}},9086:(e,t,r)=>{var n=r(6530);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},3146:(e,t,r)=>{var n=r(9086),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},6355:(e,t,r)=>{var n=r(9086),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);e.exports=n?a:function(e){return function(){return i.apply(e,arguments)}}},3880:(e,t,r)=>{var n=r(1570),o=r(6355);e.exports=function(e){if("Function"===n(e))return o(e)}},8104:(e,t,r)=>{var n=r(9081),o=r(2868),i=r(8307),a=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(n[e])||a(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},2809:(e,t,r)=>{var n=r(5222),o=r(1606);e.exports=function(e,t){var r=e[t];return o(r)?void 0:n(r)}},2868:(e,t,r)=>{var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||Function("return this")()},5584:(e,t,r)=>{var n=r(3880),o=r(2058),i=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},640:(e,t,r)=>{var n=r(7001),o=r(6530),i=r(231);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},1251:(e,t,r)=>{var n=r(3880),o=r(6530),i=r(1570),a=Object,s=n("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?s(e,""):a(e)}:a},8307:(e,t,r)=>{var n=r(2),o=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},1011:(e,t,r)=>{var n=r(6530),o=r(8307),i=/#|\.prototype\./,a=function(e,t){var r=u[s(e)];return r==c||r!=l&&(o(t)?n(t):!!t)},s=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},1606:e=>{e.exports=function(e){return null==e}},3359:(e,t,r)=>{var n=r(8307),o=r(2),i=o.all;e.exports=o.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===i}:function(e){return"object"==typeof e?null!==e:n(e)}},8367:e=>{e.exports=!0},1149:(e,t,r)=>{var n=r(8104),o=r(8307),i=r(5792),a=r(6046),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&i(t.prototype,s(e))}},7550:(e,t,r)=>{var n=r(7001),o=r(640),i=r(7139),a=r(1912),s=r(5623),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,f="enumerable",p="configurable",d="writable";t.f=n?i?function(e,t,r){if(a(e),t=s(t),a(r),"function"==typeof e&&"prototype"===t&&"value"in r&&d in r&&!r.writable){var n=c(e,t);n&&n.writable&&(e[t]=r.value,r={configurable:p in r?r.configurable:n.configurable,enumerable:f in r?r.enumerable:n.enumerable,writable:!1})}return l(e,t,r)}:l:function(e,t,r){if(a(e),t=s(t),a(r),o)try{return l(e,t,r)}catch(e){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},5904:(e,t,r)=>{var n=r(7001),o=r(3146),i=r(1156),a=r(5595),s=r(3861),u=r(5623),l=r(5584),c=r(640),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=s(e),t=u(t),c)try{return f(e,t)}catch(e){}if(l(e,t))return a(!o(i.f,e,t),e[t])}},5792:(e,t,r)=>{var n=r(3880);e.exports=n({}.isPrototypeOf)},1156:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},9466:(e,t,r)=>{var n=r(3146),o=r(8307),i=r(3359),a=TypeError;e.exports=function(e,t){var r,s;if("string"===t&&o(r=e.toString)&&!i(s=n(r,e)))return s;if(o(r=e.valueOf)&&!i(s=n(r,e)))return s;if("string"!==t&&o(r=e.toString)&&!i(s=n(r,e)))return s;throw a("Can't convert object to primitive value")}},9081:e=>{e.exports={}},3604:(e,t,r)=>{var n=r(1606),o=TypeError;e.exports=function(e){if(n(e))throw o("Can't call method on "+e);return e}},2656:(e,t,r)=>{var n=r(2868),o=r(6868),i="__core-js_shared__",a=n[i]||o(i,{});e.exports=a},6315:(e,t,r)=>{var n=r(8367),o=r(2656);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.26.0",mode:n?"pure":"global",copyright:" 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"})},9075:(e,t,r)=>{var n=r(8233),o=r(6530);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},3861:(e,t,r)=>{var n=r(1251),o=r(3604);e.exports=function(e){return n(o(e))}},2058:(e,t,r)=>{var n=r(3604),o=Object;e.exports=function(e){return o(n(e))}},3957:(e,t,r)=>{var n=r(3146),o=r(3359),i=r(1149),a=r(2809),s=r(9466),u=r(5712),l=TypeError,c=u("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var r,u=a(e,c);if(u){if(void 0===t&&(t="default"),r=n(u,e,t),!o(r)||i(r))return r;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},5623:(e,t,r)=>{var n=r(3957),o=r(1149);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},7265:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9:(e,t,r)=>{var n=r(3880),o=0,i=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},6046:(e,t,r)=>{var n=r(9075);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7139:(e,t,r)=>{var n=r(7001),o=r(6530);e.exports=n&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},5712:(e,t,r)=>{var n=r(2868),o=r(6315),i=r(5584),a=r(9),s=r(9075),u=r(6046),l=o("wks"),c=n.Symbol,f=c&&c.for,p=u?c:c&&c.withoutSetter||a;e.exports=function(e){if(!i(l,e)||!s&&"string"!=typeof l[e]){var t="Symbol."+e;s&&i(c,e)?l[e]=c[e]:l[e]=u&&f?f(t):p(t)}return l[e]}},6764:(e,t,r)=>{var n=r(390),o=r(7001),i=r(7550).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!o},{defineProperty:i})},8531:(e,t,r)=>{var n=r(6854);e.exports=n},981:()=>{},1209:()=>{},1973:()=>{},378:()=>{},9652:()=>{},6087:()=>{},9131:(e,t,r)=>{e.exports=r(5723)}},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e].call(r.exports,r,r.exports,i),r.exports}i.m=n,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var o=Object.create(null);i.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,i.d(o,a),o},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".min.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},i.l=(e,t,n,o)=>{if(r[e])r[e].push(t);else{var a,s;if(void 0!==n)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var c=u[l];if(c.getAttribute("src")==e){a=c;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=e),r[e]=[t];var f=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var o=r[e];if(delete r[e],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),s&&document.head.appendChild(a)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={535:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise(((r,o)=>n=e[t]=[r,o]));r.push(n[2]=o);var a=i.p+i.u(t),s=new Error;i.l(a,(r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,o,[a,s,u]=r,l=0;if(a.some((t=>0!==e[t]))){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(u)u(i)}for(t&&t(r);l<a.length;l++)o=a[l],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=this.webpackChunk=this.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a={};return(()=>{"use strict";function e(e,t,r){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");const n=e.length/3;let o=0,i=0;if(r)for(let r=0;r<n;r++)t[i++]=e[o++],t[i++]=e[o++],t[i++]=e[o++],t[i++]=255;else t.set(e)}function t(e,t,r){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");const n=e.length/3;let o=0,i=0,a=n,s=2*n;if(r)for(let r=0;r<n;r++)t[o++]=e[i++],t[o++]=e[a++],t[o++]=e[s++],t[o++]=255;else t.set(e)}function r(e,t,r){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");const n=e.length/3;let o=0,i=0;if(r)for(let r=0;r<n;r++){const r=e[o++],n=e[o++],a=e[o++];t[i++]=r+1.402*(a-128),t[i++]=r-.34414*(n-128)-.71414*(a-128),t[i++]=r+1.772*(n-128),t[i++]=255}else for(let r=0;r<n;r++){const r=e[o++],n=e[o++],a=e[o++];t[i++]=r+1.402*(a-128),t[i++]=r-.34414*(n-128)-.71414*(a-128),t[i++]=r+1.772*(n-128)}}function n(e,t,r){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");const n=e.length/3;let o=0,i=0,a=n,s=2*n;if(r)for(let r=0;r<n;r++){const r=e[i++],n=e[a++],u=e[s++];t[o++]=r+1.402*(u-128),t[o++]=r-.34414*(n-128)-.71414*(u-128),t[o++]=r+1.772*(n-128),t[o++]=255}else for(let r=0;r<n;r++){const r=e[i++],n=e[a++],u=e[s++];t[o++]=r+1.402*(u-128),t[o++]=r-.34414*(n-128)-.71414*(u-128),t[o++]=r+1.772*(n-128)}}function o(e,t){const r=e.length,n=new Uint8ClampedArray(r);for(let o=0;o<r;++o)n[o]=e[o]>>t;return n}function s(e,t,r){const n=e.columns*e.rows,i=e.pixelData,a=e.redPaletteColorLookupTableData,s=e.greenPaletteColorLookupTableData,u=e.bluePaletteColorLookupTableData,l=e.redPaletteColorLookupTableData.length;let c=0,f=0;const p=e.redPaletteColorLookupTableDescriptor[1],d=8===e.redPaletteColorLookupTableDescriptor[2]?0:8,h=o(a,d),m=o(s,d),y=o(u,d);if(r)for(let e=0;e<n;++e){let e=i[c++];e<p?e=0:e>p+l-1?e=l-1:e-=p,t[f++]=h[e],t[f++]=m[e],t[f++]=y[e],t[f++]=255}else for(let e=0;e<n;++e){let e=i[c++];e<p?e=0:e>p+l-1?e=l-1:e-=p,t[f++]=h[e],t[f++]=m[e],t[f++]=y[e]}}function u(e,t){if(e.elements[t]&&6===e.elements[t].length)return[e.uint16(t,0),e.uint16(t,1),e.uint16(t,2)]}function l(e,t,r){const n=[],o=e.elements[t];for(let i=0;i<r[0];i++)16===r[2]?n[i]=e.uint16(t,i):n[i]=e.byteArray[i+o.dataOffset];return n}i.r(a),i.d(a,{configure:()=>dt,convertColorSpace:()=>Ce,convertPALETTECOLOR:()=>s,convertRGBColorByPixel:()=>e,convertRGBColorByPlane:()=>t,convertYBRFullByPixel:()=>r,convertYBRFullByPlane:()=>n,createImage:()=>Fe,decodeImageFrame:()=>_e,decodeJPEGBaseline8BitColor:()=>B,default:()=>mt,external:()=>ze,getImageFrame:()=>F,getMinMax:()=>L,getPixelData:()=>k,internal:()=>$,isColorImage:()=>Te,isJPEGBaseline8BitColor:()=>xe,version:()=>ht,wadors:()=>We,wadouri:()=>pt});const c=function(e){const t={samplesPerPixel:e.uint16("x00280002"),photometricInterpretation:e.string("x00280004"),rows:e.uint16("x00280010"),columns:e.uint16("x00280011"),bitsAllocated:e.uint16("x00280100"),bitsStored:e.uint16("x00280101"),highBit:e.uint16("x00280102"),pixelRepresentation:e.uint16("x00280103"),planarConfiguration:e.uint16("x00280006"),pixelAspectRatio:e.string("x00280034")};return function(e,t){0===e.uint16("x00280103")?(t.smallestPixelValue=e.uint16("x00280106"),t.largestPixelValue=e.uint16("x00280107")):(t.smallestPixelValue=e.int16("x00280106"),t.largestPixelValue=e.int16("x00280107"))}(e,t),"PALETTE COLOR"===t.photometricInterpretation&&e.elements.x00281101&&function(e,t){t.redPaletteColorLookupTableDescriptor=u(e,"x00281101"),t.greenPaletteColorLookupTableDescriptor=u(e,"x00281102"),t.bluePaletteColorLookupTableDescriptor=u(e,"x00281103"),0===t.redPaletteColorLookupTableDescriptor[0]&&(t.redPaletteColorLookupTableDescriptor[0]=65536,t.greenPaletteColorLookupTableDescriptor[0]=65536,t.bluePaletteColorLookupTableDescriptor[0]=65536);const r=t.redPaletteColorLookupTableDescriptor[0],n=e.elements.x00281201.length===r?8:16;t.redPaletteColorLookupTableDescriptor[2]!==n&&(t.redPaletteColorLookupTableDescriptor[2]=n,t.greenPaletteColorLookupTableDescriptor[2]=n,t.bluePaletteColorLookupTableDescriptor[2]=n),t.redPaletteColorLookupTableData=l(e,"x00281201",t.redPaletteColorLookupTableDescriptor),t.greenPaletteColorLookupTableData=l(e,"x00281202",t.greenPaletteColorLookupTableDescriptor),t.bluePaletteColorLookupTableData=l(e,"x00281203",t.bluePaletteColorLookupTableDescriptor)}(e,t),t};function f(e,t){let r=t.uint16("x00283002",0);0===r&&(r=65535);let n=0;n=0===e?t.uint16("x00283002",1):t.int16("x00283002",1);const o={id:"1",firstValueMapped:n,numBitsPerEntry:t.uint16("x00283002",2),lut:[]};for(let n=0;n<r;n++)o.lut[n]=0===e?t.uint16("x00283006",n):t.int16("x00283006",n);return o}const p=function(e,t){if(!t||!t.items||!t.items.length)return;const r=[];for(let n=0;n<t.items.length;n++){const o=f(e,t.items[n].dataSet);o&&r.push(o)}return r};const d=function(e){const t=e.string("x00080016");if("1.2.840.10008.5.1.4.1.1.2"===t||"1.2.840.10008.5.1.4.1.1.2.1"===t)return 1;const r=e.floatString("x00281052"),n=e.floatString("x00281053");if(void 0!==r&&void 0!==n){const t=function(e){const t=e.uint16("x00280103"),r=e.uint16("x00280101");return 0===t?0:-1<<r-1}(e);return t*n+r<0?1:0}return e.elements.x00283000&&e.elements.x00283000.length>0?0:e.uint16("x00280103")};const h=function(e,t,r){const n=[],o=e.string(t);if(!o)return;const i=o.split("\\");if(!(r&&i.length<r)){for(let e=0;e<i.length;e++)n.push(parseFloat(i[e]));return n}};const m=function(e,t,r){return t=t||0,e&&e.Value?e.Value.length<=t?r:e.Value[t]:r};const y=function(e,t,r){const n=m(e,t,r);if(void 0!==n)return parseFloat(n)};const g=function(e,t){const r=m(e,t);if(void 0!==r)return parseFloat(r)};const v=function(e,t){if(!e)return;if(!e.Value)return;if(t&&e.Value.length<t)return;const r=[];for(let t=0;t<e.Value.length;t++)r.push(parseFloat(e.Value[t]));return r};function b(e){const t=e.indexOf(":");return e.substring(t+1)}let w=[];const _={add:function(e,t){const r=b(e);w[r]=t},get:function(e){const t=b(e);return w[t]},remove:function(e){const t=b(e);w[t]=void 0},purge:function(){w=[]}};const T=function(e,t){const{dicomParser:r}=ze,n=_.get(t);if(n){if("generalSeriesModule"===e)return{modality:m(n["00080060"]),seriesInstanceUID:m(n["0020000E"]),seriesNumber:g(n["00200011"]),studyInstanceUID:m(n["0020000D"]),seriesDate:r.parseDA(m(n["00080021"])),seriesTime:r.parseTM(m(n["00080031"],0,""))};if("patientStudyModule"===e)return{patientAge:g(n["00101010"]),patientSize:g(n["00101020"]),patientWeight:g(n["00101030"])};if("imagePlaneModule"===e){const e=v(n["00200037"],6),t=v(n["00200032"],3),r=v(n["00280030"],2);let o=null,i=null;r&&(i=r[0],o=r[1]);let a=null,s=null;return e&&(a=[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])],s=[parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]),{frameOfReferenceUID:m(n["00200052"]),rows:g(n["00280010"]),columns:g(n["00280011"]),imageOrientationPatient:e,rowCosines:a,columnCosines:s,imagePositionPatient:t,sliceThickness:g(n["00180050"]),sliceLocation:g(n["00201041"]),pixelSpacing:r,rowPixelSpacing:i,columnPixelSpacing:o}}if("imagePixelModule"===e)return{samplesPerPixel:g(n["00280002"]),photometricInterpretation:m(n["00280004"]),rows:g(n["00280010"]),columns:g(n["00280011"]),bitsAllocated:g(n["00280100"]),bitsStored:g(n["00280101"]),highBit:m(n["00280102"]),pixelRepresentation:g(n["00280103"]),planarConfiguration:g(n["00280006"]),pixelAspectRatio:m(n["00280034"]),smallestPixelValue:g(n["00280106"]),largestPixelValue:g(n["00280107"]),redPaletteColorLookupTableDescriptor:v(n["00281101"]),greenPaletteColorLookupTableDescriptor:v(n["00281102"]),bluePaletteColorLookupTableDescriptor:v(n["00281103"]),redPaletteColorLookupTableData:v(n["00281201"]),greenPaletteColorLookupTableData:v(n["00281202"]),bluePaletteColorLookupTableData:v(n["00281203"])};if("voiLutModule"===e)return{windowCenter:v(n["00281050"],1),windowWidth:v(n["00281051"],1)};if("modalityLutModule"===e)return{rescaleIntercept:g(n["00281052"]),rescaleSlope:g(n["00281053"]),rescaleType:m(n["00281054"])};if("sopCommonModule"===e)return{sopClassUID:m(n["00080016"]),sopInstanceUID:m(n["00080018"])};if("petIsotopeModule"===e){const e=m(n["00540016"]);if(void 0===e)return;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:r.parseTM(m(e["00181072"],0,"")),radionuclideTotalDose:g(e["00181074"]),radionuclideHalfLife:g(e["00181075"])}}}return"overlayPlaneModule"===e?function(e){const t=[];for(let r=0;r<=30;r+=2){let n=`x60${r.toString(16)}`;4===n.length&&(n=`x600${r.toString(16)}`);const o=m(e[`${n}3000`]);if(!o)continue;const i=[];for(let t=0;t<o.length;t++)for(let r=0;r<8;r++){const n=e.Value[o.dataOffset+t];i[8*t+r]=n>>r&1}t.push({rows:g(e[`${n}0010`]),columns:g(e[`${n}0011`]),type:m(e[`${n}0040`]),x:g(e[`${n}0050`],1)-1,y:g(e[`${n}0050`],0)-1,pixelData:i,description:m(e[`${n}0022`]),label:m(e[`${n}1500`]),roiArea:m(e[`${n}1301`]),roiMean:m(e[`${n}1302`]),roiStandardDeviation:m(e[`${n}1303`])})}return{overlays:t}}(n):"transferSyntax"===e?{transferSyntaxUID:m(n["00020010"])}:void 0}};function P(e,t,r){if(r+e.length>t.length)return!1;let n=r;for(let r=0;r<e.length;r++)if(e[r]!==t[n++])return!1;return!0}const C=function(e,t,r){r=r||0;const n=function(e){const t=new Uint8Array(e.length);for(let r=0,n=e.length;r<n;r++)t[r]=e.charCodeAt(r);return t}(t);for(let t=r;t<e.length;t++)if(n[0]===e[t]&&P(n,e,t))return t;return-1};let x={beforeSend(){},beforeProcessing:e=>Promise.resolve(e.response),imageCreated(){},strict:!1,decodeConfig:{convertFloatPixelDataToInt:!0}};function D(e){x=Object.assign(x,e)}function A(){return x}const S=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{cornerstone:o}=ze,i=A(),a=e=>{if("function"==typeof i.errorInterceptor){const t=new Error("request failed");t.request=e,t.response=e.response,t.status=e.status,i.errorInterceptor(t)}};return new Promise(((s,u)=>{const l=new XMLHttpRequest;l.open("get",e,!0);const c=i.beforeSend(l,t,r,n);l.responseType="arraybuffer";const f=Object.assign({},r,c);Object.keys(f).forEach((function(t){null!==f[t]&&("Accept"===t&&-1!==e.indexOf("accept=")||l.setRequestHeader(t,f[t]))})),n.deferred={resolve:s,reject:u},n.url=e,n.imageId=t,l.onloadstart=function(r){i.onloadstart&&i.onloadstart(r,n);const a={url:e,imageId:t};o.triggerEvent(o.events,"cornerstoneimageloadstart",a)},l.onloadend=function(r){i.onloadend&&i.onloadend(r,n);const a={url:e,imageId:t};o.triggerEvent(o.events,"cornerstoneimageloadend",a)},l.onreadystatechange=function(e){i.onreadystatechange?i.onreadystatechange(e,n):4===l.readyState&&(200===l.status?i.beforeProcessing(l).then(s).catch((()=>{a(l),u(l)})):(a(l),u(l)))},l.onprogress=function(r){const a=r.loaded;let s,u;r.lengthComputable&&(s=r.total,u=Math.round(a/s*100)),i.onprogress&&i.onprogress(r,n);const l={url:e,imageId:t,loaded:a,total:s,percentComplete:u};o.triggerEvent(o.events,o.EVENTS.IMAGE_LOAD_PROGRESS,l)},l.onerror=function(){a(l),u(l)},l.onabort=function(){a(l),u(l)},l.send()}))},$={xhrRequest:S,setOptions:D,getOptions:A};function E(e){for(let t=0;t<e.length;t++)if("--"===e[t].substr(0,2))return e[t]}function O(e){for(let t=0;t<e.length;t++)if("Content-Type:"===e[t].substr(0,13))return e[t].substr(13).trim()}function j(e,t,r){t=t||0,r=r||e.length-t;let n="";for(let o=t;o<t+r;o++)n+=String.fromCharCode(e[o]);return n}const k=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream";const n={Accept:r};return new Promise(((r,o)=>{S(e,t,n).then((function(e){const t=new Uint8Array(e),n=C(t,"\r\n\r\n");-1===n&&o(new Error("invalid response - no multipart mime header"));const i=j(t,0,n).split("\r\n"),a=E(i);a||o(new Error("invalid response - no boundary marker"));const s=n+4,u=C(t,a,s);-1===u&&o(new Error("invalid response - terminating boundary not found"));const l=u-s-2;r({contentType:O(i),imageFrame:{pixelData:new Uint8Array(e,s,l)}})}),o)}))};var R=i(9131);function I(e,t,r){return t in e?R(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const F=function(e){const{cornerstone:t}=ze,r=t.metaData.get("imagePixelModule",e);return{samplesPerPixel:r.samplesPerPixel,photometricInterpretation:r.photometricInterpretation,planarConfiguration:r.planarConfiguration,rows:r.rows,columns:r.columns,bitsAllocated:r.bitsAllocated,bitsStored:r.bitsStored,pixelRepresentation:r.pixelRepresentation,smallestPixelValue:r.smallestPixelValue,largestPixelValue:r.largestPixelValue,redPaletteColorLookupTableDescriptor:r.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:r.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:r.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:r.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:r.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:r.bluePaletteColorLookupTableData,pixelData:void 0}};const L=function(e){let t,r=e[0],n=e[0];const o=e.length;for(let i=1;i<o;i++)t=e[i],r=Math.min(r,t),n=Math.max(n,t);return{min:r,max:n}};function U(e){return function(e){let t;try{return decodeURIComponent(escape(e))}catch(r){if(t=r,t instanceof URIError)return e;throw t}}(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(e))))}const B=function(e,t,r){const n=(new Date).getTime(),o=new Blob([t],{type:"image/jpeg"});return new Promise(((t,i)=>{const a=new FileReader;void 0===a.readAsBinaryString?a.readAsArrayBuffer(o):a.readAsBinaryString(o),a.onload=function(){const o=new Image;o.onload=function(){r.height=o.height,r.width=o.width,e.rows=o.height,e.columns=o.width;const i=r.getContext("2d");i.drawImage(this,0,0);const a=i.getImageData(0,0,o.width,o.height),s=(new Date).getTime();e.pixelData=a.data,e.imageData=a,e.decodeTimeInMS=s-n;const u=L(e.pixelData);e.smallestPixelValue=u.min,e.largestPixelValue=u.max,t(e)},o.onerror=function(e){i(e)},void 0===a.readAsBinaryString?o.src=`data:image/jpeg;base64,${window.btoa(U(a.result))}`:o.src=`data:image/jpeg;base64,${window.btoa(a.result)}`},a.onerror=e=>{i(e)}}))};const W=async function(e,t){let r=t.buffer,n=t.byteOffset;const o=t.length;return 16===e.bitsAllocated?(n%2&&(r=r.slice(n),n=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(r,n,o/2):e.pixelData=new Int16Array(r,n,o/2)):8===e.bitsAllocated||1===e.bitsAllocated?e.pixelData=t:32===e.bitsAllocated&&(n%2&&(r=r.slice(n),n=0),e.pixelData=new Float32Array(r,n,o/4)),e};const M=async function(e,t){if(16===e.bitsAllocated){let n=t.buffer,o=t.byteOffset;const i=t.length;o%2&&(n=n.slice(o),o=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(n,o,i/2):e.pixelData=new Int16Array(n,o,i/2);for(let t=0;t<e.pixelData.length;t++)e.pixelData[t]=(255&(r=e.pixelData[t]))<<8|r>>8&255}else 8===e.bitsAllocated&&(e.pixelData=t);var r;return e};const V=async function(e,t){if(8===e.bitsAllocated)return e.planarConfiguration?function(e,t){const r=t,n=e.rows*e.columns,o=new ArrayBuffer(n*e.samplesPerPixel),i=new DataView(r.buffer,r.byteOffset),a=new Int8Array(r.buffer,r.byteOffset),s=new Int8Array(o);let u=0;const l=i.getInt32(0,!0);for(let e=0;e<l;++e){u=e*n;let t=i.getInt32(4*(e+1),!0),o=i.getInt32(4*(e+2),!0);0===o&&(o=r.length);const c=n*l;for(;t<o;){const e=a[t++];if(e>=0&&e<=127)for(let r=0;r<e+1&&u<c;++r)s[u]=a[t++],u++;else if(e<=-1&&e>=-127){const r=a[t++];for(let t=0;t<1-e&&u<c;++t)s[u]=r,u++}}}return e.pixelData=new Uint8Array(o),e}(e,t):function(e,t){const r=t,n=e.rows*e.columns,o=new ArrayBuffer(n*e.samplesPerPixel),i=new DataView(r.buffer,r.byteOffset),a=new Int8Array(r.buffer,r.byteOffset),s=new Int8Array(o);let u=0;const l=i.getInt32(0,!0);for(let t=0;t<l;++t){u=t;let o=i.getInt32(4*(t+1),!0),c=i.getInt32(4*(t+2),!0);0===c&&(c=r.length);const f=n*l;for(;o<c;){const t=a[o++];if(t>=0&&t<=127)for(let r=0;r<t+1&&u<f;++r)s[u]=a[o++],u+=e.samplesPerPixel;else if(t<=-1&&t>=-127){const r=a[o++];for(let n=0;n<1-t&&u<f;++n)s[u]=r,u+=e.samplesPerPixel}}}return e.pixelData=new Uint8Array(o),e}(e,t);if(16===e.bitsAllocated)return function(e,t){const r=t,n=e.rows*e.columns,o=new ArrayBuffer(n*e.samplesPerPixel*2),i=new DataView(r.buffer,r.byteOffset),a=new Int8Array(r.buffer,r.byteOffset),s=new Int8Array(o),u=i.getInt32(0,!0);for(let e=0;e<u;++e){let t=0;const o=0===e?1:0;let u=i.getInt32(4*(e+1),!0),l=i.getInt32(4*(e+2),!0);for(0===l&&(l=r.length);u<l;){const e=a[u++];if(e>=0&&e<=127)for(let r=0;r<e+1&&t<n;++r)s[2*t+o]=a[u++],t++;else if(e<=-1&&e>=-127){const r=a[u++];for(let i=0;i<1-e&&t<n;++i)s[2*t+o]=r,t++}}}0===e.pixelRepresentation?e.pixelData=new Uint16Array(o):e.pixelData=new Int16Array(o);return e}(e,t);throw new Error("unsupported pixel format for RLE")};var H=i(9400),N=i.n(H);const z=i.p+"75a0c2dfe07b824c7d21.wasm";function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Y={codec:void 0,decoder:void 0};const X=async function(e,t){await function(){if(Y.codec)return Promise.resolve();const e=N()({locateFile:e=>e.endsWith(".wasm")?z:e});return new Promise(((t,r)=>{e.then((e=>{Y.codec=e,Y.decoder=new e.JPEGDecoder,t()}),r)}))}();const r=Y.decoder;r.getEncodedBuffer(e.length).set(e),r.decode();const n=r.getFrameInfo(),o=r.getDecodedBuffer(),i={columns:n.width,rows:n.height,bitsPerPixel:n.bitsPerSample,signed:t.signed,bytesPerPixel:t.bytesPerPixel,componentsPerPixel:n.componentCount},a=function(e,t){if(e.isSigned)return new Int8Array(t.buffer,t.byteOffset,t.byteLength);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}(n,o),s={frameInfo:n};return G(G(G({},t),{},{pixelData:a,imageInfo:i,encodeOptions:s},s),i)},J={JpegImage:void 0,decodeConfig:{}};const Q=async function(e,t){var r;if(await(J.decodeConfig=r,J.JpegImage?Promise.resolve():new Promise(((e,t)=>{i.e(888).then(i.t.bind(i,1888,23)).then((t=>{let{JpegImage:r}=t;J.JpegImage=r,e()}),t)}))),void 0===J.JpegImage)throw new Error("No JPEG Baseline decoder loaded");const n=new J.JpegImage;return n.parse(t),n.colorTransform=!1,8===e.bitsAllocated?(e.pixelData=n.getData(e.columns,e.rows),e):16===e.bitsAllocated?(e.pixelData=n.getData16(e.columns,e.rows),e):void 0};var Z=i(6610),K=i.n(Z);const ee={jpeg:void 0,decodeConfig:{}};const te=async function(e,t){if(await function(e){if(ee.decodeConfig=e,ee.jpeg)return Promise.resolve();ee.jpeg=K()}(),void 0===ee.jpeg||void 0===ee.jpeg.lossless||void 0===ee.jpeg.lossless.Decoder)throw new Error("No JPEG Lossless decoder loaded");const r=e.bitsAllocated<=8?1:2,n=t.buffer,o=(new ee.jpeg.lossless.Decoder).decode(n,t.byteOffset,t.length,r);return 0===e.pixelRepresentation?16===e.bitsAllocated?(e.pixelData=new Uint16Array(o.buffer),e):(e.pixelData=new Uint8Array(o.buffer),e):(e.pixelData=new Int16Array(o.buffer),e)};var re=i(8327),ne=i.n(re);const oe=i.p+"62ab5d58a2bea7b5a1dc.wasm";function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const se={codec:void 0,decoder:void 0,decodeConfig:{}};const ue=async function(e,t){try{await function(e){if(se.decodeConfig=e,se.codec)return Promise.resolve();const t=ne()({locateFile:e=>e.endsWith(".wasm")?oe:e});return new Promise(((e,r)=>{t.then((t=>{se.codec=t,se.decoder=new t.JpegLSDecoder,e()}),r)}))}();const r=se.decoder;r.getEncodedBuffer(e.length).set(e),r.decode();const n=r.getFrameInfo(),o=r.getInterleaveMode(),i=r.getNearLossless(),a=r.getDecodedBuffer(),s={columns:n.width,rows:n.height,bitsPerPixel:n.bitsPerSample,signed:t.signed,bytesPerPixel:t.bytesPerPixel,componentsPerPixel:n.componentCount},u=function(e,t,r){if(e.bitsPerSample>8)return r?new Int16Array(t.buffer,t.byteOffset,t.byteLength/2):new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(r)return new Int8Array(t.buffer,t.byteOffset,t.byteLength);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}(n,a,t.signed),l={nearLossless:i,interleaveMode:o,frameInfo:n};return ae(ae(ae({},t),{},{pixelData:u,imageInfo:s,encodeOptions:l},l),s)}catch(e){throw"number"==typeof(r=e)?se.codec.getExceptionMessage(r):r}var r};var le=i(4044),ce=i.n(le);const fe=i.p+"36785fbd89b0e17f6099.wasm";function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const he={codec:void 0,decoder:void 0,decodeConfig:{}};const me=async function(e,t){await function(e){if(he.decodeConfig=e,he.codec)return Promise.resolve();const t=ce()({locateFile:e=>e.endsWith(".wasm")?fe:e});return new Promise(((e,r)=>{t.then((t=>{he.codec=t,he.decoder=new t.J2KDecoder,e()}),r)}))}();const r=he.decoder,n=r.getEncodedBuffer(e.length);n.set(e),r.decode();const o=r.getFrameInfo(),i=r.getDecodedBuffer();new Uint8Array(i.length).set(i);const a=`x: ${r.getImageOffset().x}, y: ${r.getImageOffset().y}`,s=r.getNumDecompositions(),u=r.getNumLayers(),l=["unknown","LRCP","RLCP","RPCL","PCRL","CPRL"][r.getProgressionOrder()+1],c=r.getIsReversible(),f=`${r.getBlockDimensions().width} x ${r.getBlockDimensions().height}`,p=`${r.getTileSize().width} x ${r.getTileSize().height}`,d=`${r.getTileOffset().x}, ${r.getTileOffset().y}`,h=r.getColorSpace(),m=`${i.length.toLocaleString()} bytes`,y=`${(i.length/n.length).toFixed(2)}:1`,g={columns:o.width,rows:o.height,bitsPerPixel:o.bitsPerSample,signed:o.isSigned,bytesPerPixel:t.bytesPerPixel,componentsPerPixel:o.componentCount},v=function(e,t){if(e.bitsPerSample>8)return e.isSigned?new Int16Array(t.buffer,t.byteOffset,t.byteLength/2):new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(e.isSigned)return new Int8Array(t.buffer,t.byteOffset,t.byteLength);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}(o,i),b={imageOffset:a,numDecompositions:s,numLayers:u,progessionOrder:l,reversible:c,blockDimensions:f,tileSize:p,tileOffset:d,colorTransform:h,decodedSize:m,compressionRatio:y};return de(de(de({},t),{},{pixelData:v,imageInfo:g,encodeOptions:b},b),g)};function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const ve=function(e,t,r,n,o,i){const a=(new Date).getTime();let s,u=null;switch(t){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":case"1.2.840.10008.1.2.1.99":u=W(e,r);break;case"1.2.840.10008.1.2.2":u=M(e,r);break;case"1.2.840.10008.1.2.5":u=V(e,r);break;case"1.2.840.10008.1.2.4.50":s=ge({},e),u=X(r,s);break;case"1.2.840.10008.1.2.4.51":u=Q(e,r);break;case"1.2.840.10008.1.2.4.57":case"1.2.840.10008.1.2.4.70":u=te(e,r);break;case"1.2.840.10008.1.2.4.80":s=ge({signed:1===e.pixelRepresentation,bytesPerPixel:e.bitsAllocated<=8?1:2},e),u=ue(r,s);break;case"1.2.840.10008.1.2.4.81":s=ge({signed:!1,bytesPerPixel:e.bitsAllocated<=8?1:2},e),u=ue(r,s);break;case"1.2.840.10008.1.2.4.90":case"1.2.840.10008.1.2.4.91":s=ge({},e),u=me(r,s);break;default:throw new Error(`no decoder for transfer syntax ${t}`)}if(!u)throw new Error("decodePromise not defined");u.then((e=>{i(function(e,t,r){const n=void 0!==e.pixelRepresentation&&1===e.pixelRepresentation,o=n&&void 0!==e.bitsStored?32-e.bitsStored:void 0;if(n&&void 0!==o)for(let t=0;t<e.pixelData.length;t++)e.pixelData[t]=e.pixelData[t]<<o>>o;let i=e.pixelData;if(e.pixelDataLength=e.pixelData.length,t.targetBuffer){let r,n;({offset:r,length:n}=t.targetBuffer);const{arrayBuffer:o,type:a}=t.targetBuffer;let s;switch(null==r&&(r=0),null==n&&0!==r?n=e.pixelDataLength-r:null==n&&(n=e.pixelDataLength),a){case"Uint8Array":s=Uint8Array;break;case"Uint16Array":s=Uint16Array;break;case"Float32Array":s=Float32Array;break;default:throw new Error("target array for image does not have a valid type.")}const u=e.pixelData;if(n!==u.length)throw new Error("target array for image does not have the same length as the decoded image length.");let l;l=o?new s(o,r,n):new s(n),l.set(u,0),i=l}if(t.preScale.enabled){const r=t.preScale.scalingParameters;if(!r)throw new Error("options.preScale.scalingParameters must be defined if preScale.enabled is true, and scalingParameters cannot be derived from the metadata providers.");const{rescaleSlope:n,rescaleIntercept:o}=r;"number"==typeof n&&"number"==typeof o&&function(e,t){const r=e.length,{rescaleSlope:n,rescaleIntercept:o,suvbw:i}=t;if("PT"===t.modality){if("number"!=typeof i)return;for(let t=0;t<r;t++)e[t]=i*(e[t]*n+o)}else for(let t=0;t<r;t++)e[t]=e[t]*n+o;return!0}(i,r)&&(e.preScale=ge(ge({},t.preScale),{},{scaled:!0}))}t.targetBuffer&&(!t.targetBuffer.arrayBuffer||t.targetBuffer.arrayBuffer instanceof ArrayBuffer)&&(e.pixelData=i);const a=(new Date).getTime();return e.decodeTimeInMS=a-r,e}(e,o,a))})).catch((e=>{throw e}))};function be(e){return"number"==typeof e}function we(e,t,r,n){const o=A(),{strict:i,decodeConfig:a}=o;return new Promise(((o,s)=>{try{const s=e=>{!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r=L(e.pixelData),n=!(be(e.smallestPixelValue)&&be(e.largestPixelValue));!0!==t||n?(e.smallestPixelValue=r.min,e.largestPixelValue=r.max):(e.smallestPixelValue!==r.min&&console.warn("Image smallestPixelValue tag is incorrect. Rendering performance will suffer considerably."),e.largestPixelValue!==r.max&&console.warn("Image largestPixelValue tag is incorrect. Rendering performance will suffer considerably."))}(e,i),o(e)};ve(...[e,t,r,a,n,s])}catch(e){console.error(e),s(e)}}))}const _e=function(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};switch(t){case"1.2.840.10008.1.2":case"1.2.840.10008.1.2.1":case"1.2.840.10008.1.2.2":case"1.2.840.10008.1.2.1.99":case"1.2.840.10008.1.2.5":case"1.2.840.10008.1.2.4.51":case"1.2.840.10008.1.2.4.57":case"1.2.840.10008.1.2.4.70":case"1.2.840.10008.1.2.4.80":case"1.2.840.10008.1.2.4.81":case"1.2.840.10008.1.2.4.90":case"1.2.840.10008.1.2.4.91":return we(e,t,r,o);case"1.2.840.10008.1.2.4.50":return 8!==e.bitsAllocated||3!==e.samplesPerPixel&&4!==e.samplesPerPixel?we(e,t,r,o):B(e,r,n)}return Promise.reject(new Error(`No decoder for transfer syntax ${t}`))};function Te(e){return"RGB"===e||"PALETTE COLOR"===e||"YBR_FULL"===e||"YBR_FULL_422"===e||"YBR_PARTIAL_422"===e||"YBR_PARTIAL_420"===e||"YBR_RCT"===e||"YBR_ICT"===e}function Pe(r,n,o){0===r.planarConfiguration?e(r.pixelData,n,o):t(r.pixelData,n,o)}function Ce(e,t,o){if("RGB"===e.photometricInterpretation)Pe(e,t,o);else if("YBR_RCT"===e.photometricInterpretation)Pe(e,t,o);else if("YBR_ICT"===e.photometricInterpretation)Pe(e,t,o);else if("PALETTE COLOR"===e.photometricInterpretation)s(e,t,o);else if("YBR_FULL_422"===e.photometricInterpretation)!function(e,t,r){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%2!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");const n=e.length/2;let o=0,i=0;if(r)for(let r=0;r<n;r+=2){const r=e[o++],n=e[o++],a=e[o++],s=e[o++];t[i++]=r+1.402*(s-128),t[i++]=r-.34414*(a-128)-.71414*(s-128),t[i++]=r+1.772*(a-128),t[i++]=255,t[i++]=n+1.402*(s-128),t[i++]=n-.34414*(a-128)-.71414*(s-128),t[i++]=n+1.772*(a-128),t[i++]=255}else for(let r=0;r<n;r+=2){const r=e[o++],n=e[o++],a=e[o++],s=e[o++];t[i++]=r+1.402*(s-128),t[i++]=r-.34414*(a-128)-.71414*(s-128),t[i++]=r+1.772*(a-128),t[i++]=n+1.402*(s-128),t[i++]=n-.34414*(a-128)-.71414*(s-128),t[i++]=n+1.772*(a-128)}}(e.pixelData,t,o);else{if("YBR_FULL"!==e.photometricInterpretation)throw new Error(`No color space conversion for photometric interpretation ${e.photometricInterpretation}`);!function(e,t,o){0===e.planarConfiguration?r(e.pixelData,t,o):n(e.pixelData,t,o)}(e,t,o)}}const xe=function(e,t){if(t=t||e.transferSyntax,8===e.bitsAllocated&&"1.2.840.10008.1.2.4.50"===t&&(3===e.samplesPerPixel||4===e.samplesPerPixel))return!0};function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t){const r=e.get("modalityLutModule",t)||{},n=e.get("generalSeriesModule",t)||{},{modality:o}=n,i={rescaleSlope:r.rescaleSlope,rescaleIntercept:r.rescaleIntercept,modality:o},a=e.get("scalingModule",t)||{};return Ae(Ae({},i),"PT"===o&&{suvbw:a.suvbw})}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}let Oe="";function je(e){return"1.2.840.10008.5.1.4.1.1.12.1"!==e&&"1.2.840.10008.5.1.4.1.1.12.2.1"!==e}function ke(e){const t=L(e),r=Math.abs(t.max-t.min)/65535,n=t.min,o=e.length,i=new Uint16Array(o);let a=65535,s=0;for(let t=0;t<o;t++){const o=Math.floor((e[t]-n)/r);i[t]=o,a=Math.min(a,o),s=Math.max(s,o)}return{min:a,max:s,intPixelData:i,slope:r,intercept:n}}function Re(e){32===e.bitsAllocated?e.pixelData=new Float32Array(e.pixelData):16===e.bitsAllocated?0===e.pixelRepresentation?e.pixelData=new Uint16Array(e.pixelData):e.pixelData=new Int16Array(e.pixelData):e.pixelData=new Uint8Array(e.pixelData)}function Ie(e,t){const r=e.length/4;let n=0,o=0;for(let i=0;i<r;i++)t[o++]=e[n++],t[o++]=e[n++],t[o++]=e[n++],n++;return t}const Fe=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.log("transferSyntax",r);let o=!0;if(void 0!==n.useRGBA&&(o=n.useRGBA),n.preScale={enabled:!(!n.preScale||void 0===n.preScale.enabled)&&n.preScale.enabled},!t||!t.length)return Promise.reject(new Error("The file does not contain image data."));const{cornerstone:i}=ze,a=document.createElement("canvas"),s=F(e);if(n.preScale.enabled){const t=Se(i.metaData,e);t&&(n.preScale=Ee(Ee({},n.preScale),{},{scalingParameters:t}))}const u=_e(s,r,t,a,n),{decodeConfig:l}=A(),{convertFloatPixelDataToInt:c}=l;return new Promise(((t,s)=>{u.then((function(s){let u=!1;if(n.targetBuffer){let e,t;({offset:e,length:t}=n.targetBuffer);const{arrayBuffer:r,type:o}=n.targetBuffer;let i,a;switch(null==t&&(t=s.pixelDataLength),null==e&&(e=0),o){case"Uint8Array":i=Uint8Array;break;case"Uint16Array":i=Uint16Array;break;case"Float32Array":i=Float32Array;break;default:throw new Error("target array for image does not have a valid type.")}if(t!==s.pixelDataLength)throw new Error("target array for image does not have the same length as the decoded image length.");a=r?new i(r,e,t):new i(s.pixelData),s.pixelData=a,u=!0}u||Re(s);const l=i.metaData.get("imagePlaneModule",e)||{},f=i.metaData.get("voiLutModule",e)||{},p=i.metaData.get("modalityLutModule",e)||{},d=i.metaData.get("sopCommonModule",e)||{},h=Te(s.photometricInterpretation);if(h){if(o){if(!xe(s,r)){a.height=s.rows,a.width=s.columns;const e=a.getContext("2d").createImageData(s.columns,s.rows);Ce(s,e.data,o),s.imageData=e,s.pixelData=e.data}}else if(xe(s,r)){const e=new Uint8ClampedArray(s.pixelData.length/4*3);s.pixelData=Ie(s.pixelData,e)}else if("PALETTE COLOR"===s.photometricInterpretation){a.height=s.rows,a.width=s.columns;const e=a.getContext("2d").createImageData(s.columns,s.rows);Ce(s,e.data,!0);const t=new e.data.constructor(e.data.length/4*3);s.pixelData=Ie(e.data,t)}const e=L(s.pixelData);s.smallestPixelValue=e.min,s.largestPixelValue=e.max}const m={imageId:e,color:h,columnPixelSpacing:l.columnPixelSpacing,columns:s.columns,height:s.rows,preScale:s.preScale,intercept:p.rescaleIntercept?p.rescaleIntercept:0,slope:p.rescaleSlope?p.rescaleSlope:1,invert:"MONOCHROME1"===s.photometricInterpretation,minPixelValue:s.smallestPixelValue,maxPixelValue:s.largestPixelValue,rowPixelSpacing:l.rowPixelSpacing,rows:s.rows,sizeInBytes:s.pixelData.byteLength,width:s.columns,windowCenter:f.windowCenter?f.windowCenter[0]:void 0,windowWidth:f.windowWidth?f.windowWidth[0]:void 0,decodeTimeInMS:s.decodeTimeInMS,floatPixelData:void 0,imageFrame:s,rgba:h&&o};if(s.pixelData instanceof Float32Array&&c){const e=s.pixelData,t=ke(e);m.minPixelValue=t.min,m.maxPixelValue=t.max,m.slope=t.slope,m.intercept=t.intercept,m.floatPixelData=e,m.getPixelData=()=>t.intPixelData}else m.getPixelData=()=>s.pixelData;if(m.color&&(m.getCanvas=function(){if(Oe===e)return a;a.height=m.rows,a.width=m.columns;return a.getContext("2d").putImageData(s.imageData,0,0),Oe=e,a}),p.modalityLUTSequence&&p.modalityLUTSequence.length>0&&je(d.sopClassUID)&&(m.modalityLUT=p.modalityLUTSequence[0]),f.voiLUTSequence&&f.voiLUTSequence.length>0&&(m.voiLUT=f.voiLUTSequence[0]),m.color&&(m.windowWidth=255,m.windowCenter=127),void 0===m.windowCenter||void 0===m.windowWidth){const e=m.maxPixelValue*m.slope+m.intercept,t=m.minPixelValue*m.slope+m.intercept;m.windowWidth=e-t,m.windowCenter=(e+t)/2}t(m)}),s)}))};function Le(e){const t="1.2.840.10008.1.2";if(!e)return t;const r=e.split(";"),n={};r.forEach((e=>{const t=e.split("=");if(2!==t.length)return;const r=t[1].trim().replace(/"/g,"");n[t[0].trim()]=r}));const o={"image/jpeg":"1.2.840.10008.1.2.4.50","image/x-dicom-rle":"1.2.840.10008.1.2.5","image/x-jls":"1.2.840.10008.1.2.4.80","image/jls":"1.2.840.10008.1.2.4.80","image/jll":"1.2.840.10008.1.2.4.70","image/jp2":"1.2.840.10008.1.2.4.90","image/jpx":"1.2.840.10008.1.2.4.92"};return n["transfer-syntax"]?n["transfer-syntax"]:e&&!Object.keys(n).length&&o[e]?o[e]:n.type&&o[n.type]?o[n.type]:t}function Ue(){return ze.cornerstone.imageRetrievalPoolManager}const Be=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Ue(),n=(new Date).getTime(),o=new Promise(((o,i)=>{const a=t.requestType||"interaction",s=t.additionalDetails||{imageId:e},u=void 0===t.priority?5:t.priority,l=t.addToBeginning||!1,c=e.substring(7);r.addRequest(function(e,r,a){return k(e,r,a).then((e=>{const a=Le(e.contentType),s=e.imageFrame.pixelData;Fe(r,s,a,t).then((e=>{const t=(new Date).getTime();e.loadTimeInMS=t-n,o(e)}),i)}),i).catch((e=>{i(e)}))}.bind(this,c,e,"multipart/related; type=application/octet-stream; transfer-syntax=*"),a,s,u,l)}));return{promise:o,cancelFn:void 0}};const We={metaData:{getNumberString:y,getNumberValue:g,getNumberValues:v,getValue:m,metaDataProvider:T},findIndexOfString:C,getPixelData:k,loadImage:Be,metaDataManager:_,register:function(e){e.registerImageLoader("wadors",Be),e.metaData.addProvider(T)}};const Me=function(e){We.register(e),pt.register(e)};let Ve,He;const Ne={set cornerstone(e){Ve=e,Me(Ve)},get cornerstone(){if(!Ve){if(!window||!window.cornerstone)throw new Error("cornerstoneWADOImageLoader requires a copy of Cornerstone to work properly. Please add cornerstoneWADOImageLoader.external.cornerstone = cornerstone; to your application.");Ve=window.cornerstone,Me(Ve)}return Ve},set dicomParser(e){He=e},get dicomParser(){if(!He){if(!window||!window.dicomParser)throw new Error("cornerstoneWADOImageLoader requires a copy of dicomParser to work properly. Please add cornerstoneWADOImageLoader.external.dicomParser = dicomParser; to your application.");He=window.dicomParser}return He}},ze=Ne;const qe=function(e){const t=e.indexOf(":");let r=e.substring(t+1);const n=r.indexOf("frame=");let o;if(-1!==n){const e=r.substr(n+6);o=parseInt(e,10),r=r.substr(0,n-1)}return{scheme:e.substr(0,t),url:r,frame:o}};let Ge=0,Ye={},Xe={};function Je(){return{cacheSizeInBytes:Ge,numberOfDataSetsCached:Object.keys(Ye).length}}const Qe={isLoaded:function(e){return void 0!==Ye[e]},load:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,r=arguments.length>2?arguments[2]:void 0;const{cornerstone:n,dicomParser:o}=ze;if(Ye[e])return new Promise((t=>{Ye[e].cacheCount++,t(Ye[e].dataSet)}));if(Xe[e])return Xe[e].cacheCount++,Xe[e];const i=t(e,r),a=new Promise(((t,r)=>{i.then((function(i){const s=new Uint8Array(i);let u;try{u=o.parseDicom(s)}catch(e){return r(e)}Ye[e]={dataSet:u,cacheCount:a.cacheCount},Ge+=u.byteArray.length,t(u),n.triggerEvent(n.events,"datasetscachechanged",{uri:e,action:"loaded",cacheInfo:Je()})}),r).then((()=>{delete Xe[e]}),(()=>{delete Xe[e]}))}));return a.cacheCount=1,Xe[e]=a,a},unload:function(e){const{cornerstone:t}=ze;Ye[e]&&(Ye[e].cacheCount--,0===Ye[e].cacheCount&&(Ge-=Ye[e].dataSet.byteArray.length,delete Ye[e],t.triggerEvent(t.events,"datasetscachechanged",{uri:e,action:"unloaded",cacheInfo:Je()})))},getInfo:Je,purge:function(){Ye={},Xe={},Ge=0},get:function(e){if(Ye[e])return Ye[e].dataSet}};const Ze=function(e,t){const{dicomParser:r}=ze,n=qe(t),o=Qe.get(n.url);if(o){if("generalSeriesModule"===e)return{modality:o.string("x00080060"),seriesInstanceUID:o.string("x0020000e"),seriesNumber:o.intString("x00200011"),studyInstanceUID:o.string("x0020000d"),seriesDate:r.parseDA(o.string("x00080021")),seriesTime:r.parseTM(o.string("x00080031")||"")};if("patientStudyModule"===e)return{patientAge:o.intString("x00101010"),patientSize:o.floatString("x00101020"),patientWeight:o.floatString("x00101030")};if("imagePlaneModule"===e){const e=h(o,"x00200037",6),t=h(o,"x00200032",3),r=h(o,"x00280030",2);let n=null,i=null;r&&(i=r[0],n=r[1]);let a=null,s=null;return e&&(a=[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2])],s=[parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5])]),{frameOfReferenceUID:o.string("x00200052"),rows:o.uint16("x00280010"),columns:o.uint16("x00280011"),imageOrientationPatient:e,rowCosines:a,columnCosines:s,imagePositionPatient:t,sliceThickness:o.floatString("x00180050"),sliceLocation:o.floatString("x00201041"),pixelSpacing:r,rowPixelSpacing:i,columnPixelSpacing:n}}if("imagePixelModule"===e)return c(o);if("modalityLutModule"===e)return{rescaleIntercept:o.floatString("x00281052"),rescaleSlope:o.floatString("x00281053"),rescaleType:o.string("x00281054"),modalityLUTSequence:p(o.uint16("x00280103"),o.elements.x00283000)};if("voiLutModule"===e){const e=d(o);return{windowCenter:h(o,"x00281050",1),windowWidth:h(o,"x00281051",1),voiLUTSequence:p(e,o.elements.x00283010)}}if("sopCommonModule"===e)return{sopClassUID:o.string("x00080016"),sopInstanceUID:o.string("x00080018")};if("petIsotopeModule"===e){const e=o.elements.x00540016;if(void 0===e)return;const t=e.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:r.parseTM(t.string("x00181072")||""),radionuclideTotalDose:t.floatString("x00181074"),radionuclideHalfLife:t.floatString("x00181075")}}}return"overlayPlaneModule"===e?function(e){const t=[];for(let r=0;r<=30;r+=2){let n=`x60${r.toString(16)}`;4===n.length&&(n=`x600${r.toString(16)}`);const o=e.elements[`${n}3000`];if(!o)continue;const i=[];for(let t=0;t<o.length;t++)for(let r=0;r<8;r++){const n=e.byteArray[o.dataOffset+t];i[8*t+r]=n>>r&1}t.push({rows:e.uint16(`${n}0010`),columns:e.uint16(`${n}0011`),type:e.string(`${n}0040`),x:e.int16(`${n}0050`,1)-1,y:e.int16(`${n}0050`,0)-1,pixelData:i,description:e.string(`${n}0022`),label:e.string(`${n}1500`),roiArea:e.string(`${n}1301`),roiMean:e.string(`${n}1302`),roiStandardDeviation:e.string(`${n}1303`)})}return{overlays:t}}(o):"transferSyntax"===e?{transferSyntaxUID:o.string("x00020010")}:void 0}};let Ke=[];const et={add:function(e){return"dicomfile:"+(Ke.push(e)-1)},get:function(e){return Ke[e]},remove:function(e){Ke[e]=void 0},purge:function(){Ke=[]}};function tt(e,t){const{dicomParser:r}=ze;if(e.elements.x7fe00010&&e.elements.x7fe00010.basicOffsetTable.length)return r.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t);if(function(e){return e.intString("x00280008")!==e.elements.x7fe00010.fragments.length}(e)){const n=r.createJPEGBasicOffsetTable(e,e.elements.x7fe00010);return r.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t,n)}return r.readEncapsulatedPixelDataFromFragments(e,e.elements.x7fe00010,t)}function rt(e,t){return e&1<<t}const nt=function(e,t,r){const n=new Uint8Array(r);for(let o=0;o<r;o++){const r=e[Math.floor(o/8)+t],i=o%8;n[o]=rt(r,i)?1:0}return n};const ot=function(e,t){const r=e.elements.x7fe00010||e.elements.x7fe00008,n=e.uint16("x00280100"),o=e.uint16("x00280010"),i=e.uint16("x00280011");let a=e.uint16("x00280002");"YBR_FULL_422"===e.string("x00280004")&&(a=2,console.warn("Using SamplesPerPixel of 2 for YBR_FULL_422 photometric interpretation.\n      See http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.6.3.html for more information."));const s=r.dataOffset,u=o*i*a;let l;if(8===n){if(l=s+t*u,l>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,l,u)}if(16===n){if(l=s+t*u*2,l>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,l,2*u)}if(1===n){if(l=s+t*u*.125,l>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return nt(e.byteArray,l,u)}if(32===n){if(l=s+t*u*4,l>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,l,4*u)}throw new Error("unsupported pixel format")};const it=function(e){const t=qe(e),r=parseInt(t.url,10),n=et.get(r);return new Promise(((e,t)=>{const r=new FileReader;r.onload=t=>{const r=t.target.result;e(r)},r.onerror=t,r.readAsArrayBuffer(n)}))};const at=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=e.elements.x7fe00010||e.elements.x7fe00008;return r?r.encapsulatedPixelData?tt(e,t):ot(e,t):null};function st(e,t){e.decache=function(){const e=qe(t);Qe.unload(e.url)}}function ut(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;const a=(new Date).getTime(),s={cancelFn:void 0};return s.promise=new Promise(((u,l)=>{e.then((e=>{const c=at(e,r),f=e.string("x00020010"),p=(new Date).getTime(),d=Fe(t,c,f,o);st(s,t),d.then((t=>{t.data=e,t.sharedCacheKey=n;const r=(new Date).getTime();t.loadTimeInMS=p-a,t.totalTimeInMS=r-a,void 0!==i&&void 0!==i.imageDoneCallback&&i.imageDoneCallback(t),u(t)}),(function(t){l({error:t,dataSet:e})}))}),(function(e){l({error:e})}))})),s}function lt(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=(new Date).getTime(),a=new Promise(((a,s)=>{const u=(new Date).getTime();let l;try{const n=at(e,r),i=e.string("x00020010");l=Fe(t,n,i,o)}catch(t){return void s({error:t,dataSet:e})}l.then((t=>{t.data=e,t.sharedCacheKey=n;const r=(new Date).getTime();t.loadTimeInMS=u-i,t.totalTimeInMS=r-i,a(t)}),s)}));return{promise:a,cancelFn:void 0}}function ct(e){return"dicomweb"===e||"wadouri"===e?S:"dicomfile"===e?it:void 0}function ft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=qe(e);t=Object.assign({},t);let n=t.loader;if(void 0===n?n=ct(r.scheme):delete t.loader,Qe.isLoaded(r.url)){return lt(Qe.get(r.url,n,e),e,r.frame,r.url,t)}const o=Qe.load(r.url,n,e);return ut(o,e,r.frame,r.url,t)}const pt={metaData:{getImagePixelModule:c,getLUTs:p,getModalityLUTOutputPixelRepresentation:d,getNumberValues:h,metaDataProvider:Ze},dataSetCacheManager:Qe,fileManager:et,getEncapsulatedImageFrame:tt,getUncompressedImageFrame:ot,loadFileRequest:it,loadImageFromPromise:ut,getLoaderForScheme:ct,loadImage:ft,parseImageId:qe,unpackBinaryFrame:nt,register:function(e){e.registerImageLoader("dicomweb",ft),e.registerImageLoader("wadouri",ft),e.registerImageLoader("dicomfile",ft),e.metaData.addProvider(Ze)}};const dt=function(e){D(e)},ht="0.0.0-semantically-released",mt={convertRGBColorByPixel:e,convertRGBColorByPlane:t,convertYBRFullByPixel:r,convertYBRFullByPlane:n,convertPALETTECOLOR:s,wadouri:pt,wadors:We,configure:dt,convertColorSpace:Ce,createImage:Fe,decodeImageFrame:_e,decodeJPEGBaseline8BitColor:B,getImageFrame:F,getPixelData:k,getMinMax:L,isColorImage:Te,isJPEGBaseline8BitColor:xe,version:ht,internal:$,external:Ne}})(),a})()));
//# sourceMappingURL=cornerstoneWADOImageLoader.min.js.map